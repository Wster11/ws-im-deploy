(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1fd9376f"],{"09fe":function(e,t,o){},1146:function(e,t,o){},1584:function(e,t,o){"use strict";o("25f7")},"1a04":function(e,t,o){},"1cce":function(e,t,o){},"21a7":function(e,t,o){"use strict";o("68ef"),o("cb51"),o("3743"),o("1a04"),o("1146")},"25f7":function(e,t,o){},3393:function(e,t,o){},3980:function(e,t,o){(function(t,n){e.exports=n(o("7a23"))})("undefined"!==typeof self&&self,(function(e){return function(e){var t={};function o(n){if(t[n])return t[n].exports;var c=t[n]={i:n,l:!1,exports:{}};return e[n].call(c.exports,c,c.exports,o),c.l=!0,c.exports}return o.m=e,o.c=t,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var c in e)o.d(n,c,function(t){return e[t]}.bind(null,c));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="",o(o.s="fb15")}({"06cf":function(e,t,o){var n=o("83ab"),c=o("d1e7"),a=o("5c6c"),r=o("fc6a"),i=o("c04e"),l=o("5135"),s=o("0cfb"),u=Object.getOwnPropertyDescriptor;t.f=n?u:function(e,t){if(e=r(e),t=i(t,!0),s)try{return u(e,t)}catch(o){}if(l(e,t))return a(!c.f.call(e,t),e[t])}},"0cfb":function(e,t,o){var n=o("83ab"),c=o("d039"),a=o("cc12");e.exports=!n&&!c((function(){return 7!=Object.defineProperty(a("div"),"a",{get:function(){return 7}}).a}))},1276:function(e,t,o){"use strict";var n=o("d784"),c=o("44e7"),a=o("825a"),r=o("1d80"),i=o("4840"),l=o("8aa5"),s=o("50c4"),u=o("14c3"),d=o("9263"),m=o("d039"),p=[].push,g=Math.min,b=4294967295,f=!m((function(){return!RegExp(b,"y")}));n("split",2,(function(e,t,o){var n;return n="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(e,o){var n=String(r(this)),a=void 0===o?b:o>>>0;if(0===a)return[];if(void 0===e)return[n];if(!c(e))return t.call(n,e,a);var i,l,s,u=[],m=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),g=0,f=new RegExp(e.source,m+"g");while(i=d.call(f,n)){if(l=f.lastIndex,l>g&&(u.push(n.slice(g,i.index)),i.length>1&&i.index<n.length&&p.apply(u,i.slice(1)),s=i[0].length,g=l,u.length>=a))break;f.lastIndex===i.index&&f.lastIndex++}return g===n.length?!s&&f.test("")||u.push(""):u.push(n.slice(g)),u.length>a?u.slice(0,a):u}:"0".split(void 0,0).length?function(e,o){return void 0===e&&0===o?[]:t.call(this,e,o)}:t,[function(t,o){var c=r(this),a=void 0==t?void 0:t[e];return void 0!==a?a.call(t,c,o):n.call(String(c),t,o)},function(e,c){var r=o(n,e,this,c,n!==t);if(r.done)return r.value;var d=a(e),m=String(this),p=i(d,RegExp),v=d.unicode,h=(d.ignoreCase?"i":"")+(d.multiline?"m":"")+(d.unicode?"u":"")+(f?"y":"g"),j=new p(f?d:"^(?:"+d.source+")",h),O=void 0===c?b:c>>>0;if(0===O)return[];if(0===m.length)return null===u(j,m)?[m]:[];var y=0,w=0,x=[];while(w<m.length){j.lastIndex=f?w:0;var M,k=u(j,f?m:m.slice(w));if(null===k||(M=g(s(j.lastIndex+(f?0:w)),m.length))===y)w=l(m,w,v);else{if(x.push(m.slice(y,w)),x.length===O)return x;for(var S=1;S<=k.length-1;S++)if(x.push(k[S]),x.length===O)return x;w=y=M}}return x.push(m.slice(y)),x}]}),!f)},"14c3":function(e,t,o){var n=o("c6b6"),c=o("9263");e.exports=function(e,t){var o=e.exec;if("function"===typeof o){var a=o.call(e,t);if("object"!==typeof a)throw TypeError("RegExp exec method returned something other than an Object or null");return a}if("RegExp"!==n(e))throw TypeError("RegExp#exec called on incompatible receiver");return c.call(e,t)}},"1c0b":function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(String(e)+" is not a function");return e}},"1d80":function(e,t){e.exports=function(e){if(void 0==e)throw TypeError("Can't call method on "+e);return e}},"23cb":function(e,t,o){var n=o("a691"),c=Math.max,a=Math.min;e.exports=function(e,t){var o=n(e);return o<0?c(o+t,0):a(o,t)}},"23e7":function(e,t,o){var n=o("da84"),c=o("06cf").f,a=o("9112"),r=o("6eeb"),i=o("ce4e"),l=o("e893"),s=o("94ca");e.exports=function(e,t){var o,u,d,m,p,g,b=e.target,f=e.global,v=e.stat;if(u=f?n:v?n[b]||i(b,{}):(n[b]||{}).prototype,u)for(d in t){if(p=t[d],e.noTargetGet?(g=c(u,d),m=g&&g.value):m=u[d],o=s(f?d:b+(v?".":"#")+d,e.forced),!o&&void 0!==m){if(typeof p===typeof m)continue;l(p,m)}(e.sham||m&&m.sham)&&a(p,"sham",!0),r(u,d,p,e)}}},"241c":function(e,t,o){var n=o("ca84"),c=o("7839"),a=c.concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return n(e,a)}},"428f":function(e,t,o){var n=o("da84");e.exports=n},"44ad":function(e,t,o){var n=o("d039"),c=o("c6b6"),a="".split;e.exports=n((function(){return!Object("z").propertyIsEnumerable(0)}))?function(e){return"String"==c(e)?a.call(e,""):Object(e)}:Object},"44e7":function(e,t,o){var n=o("861d"),c=o("c6b6"),a=o("b622"),r=a("match");e.exports=function(e){var t;return n(e)&&(void 0!==(t=e[r])?!!t:"RegExp"==c(e))}},4840:function(e,t,o){var n=o("825a"),c=o("1c0b"),a=o("b622"),r=a("species");e.exports=function(e,t){var o,a=n(e).constructor;return void 0===a||void 0==(o=n(a)[r])?t:c(o)}},4930:function(e,t,o){var n=o("d039");e.exports=!!Object.getOwnPropertySymbols&&!n((function(){return!String(Symbol())}))},"4d64":function(e,t,o){var n=o("fc6a"),c=o("50c4"),a=o("23cb"),r=function(e){return function(t,o,r){var i,l=n(t),s=c(l.length),u=a(r,s);if(e&&o!=o){while(s>u)if(i=l[u++],i!=i)return!0}else for(;s>u;u++)if((e||u in l)&&l[u]===o)return e||u||0;return!e&&-1}};e.exports={includes:r(!0),indexOf:r(!1)}},"50c4":function(e,t,o){var n=o("a691"),c=Math.min;e.exports=function(e){return e>0?c(n(e),9007199254740991):0}},5135:function(e,t){var o={}.hasOwnProperty;e.exports=function(e,t){return o.call(e,t)}},5692:function(e,t,o){var n=o("c430"),c=o("c6cd");(e.exports=function(e,t){return c[e]||(c[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.8.3",mode:n?"pure":"global",copyright:"© 2021 Denis Pushkarev (zloirock.ru)"})},"56ef":function(e,t,o){var n=o("d066"),c=o("241c"),a=o("7418"),r=o("825a");e.exports=n("Reflect","ownKeys")||function(e){var t=c.f(r(e)),o=a.f;return o?t.concat(o(e)):t}},"5c6c":function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},6547:function(e,t,o){var n=o("a691"),c=o("1d80"),a=function(e){return function(t,o){var a,r,i=String(c(t)),l=n(o),s=i.length;return l<0||l>=s?e?"":void 0:(a=i.charCodeAt(l),a<55296||a>56319||l+1===s||(r=i.charCodeAt(l+1))<56320||r>57343?e?i.charAt(l):a:e?i.slice(l,l+2):r-56320+(a-55296<<10)+65536)}};e.exports={codeAt:a(!1),charAt:a(!0)}},"69f3":function(e,t,o){var n,c,a,r=o("7f9a"),i=o("da84"),l=o("861d"),s=o("9112"),u=o("5135"),d=o("c6cd"),m=o("f772"),p=o("d012"),g=i.WeakMap,b=function(e){return a(e)?c(e):n(e,{})},f=function(e){return function(t){var o;if(!l(t)||(o=c(t)).type!==e)throw TypeError("Incompatible receiver, "+e+" required");return o}};if(r){var v=d.state||(d.state=new g),h=v.get,j=v.has,O=v.set;n=function(e,t){return t.facade=e,O.call(v,e,t),t},c=function(e){return h.call(v,e)||{}},a=function(e){return j.call(v,e)}}else{var y=m("state");p[y]=!0,n=function(e,t){return t.facade=e,s(e,y,t),t},c=function(e){return u(e,y)?e[y]:{}},a=function(e){return u(e,y)}}e.exports={set:n,get:c,has:a,enforce:b,getterFor:f}},"6eeb":function(e,t,o){var n=o("da84"),c=o("9112"),a=o("5135"),r=o("ce4e"),i=o("8925"),l=o("69f3"),s=l.get,u=l.enforce,d=String(String).split("String");(e.exports=function(e,t,o,i){var l,s=!!i&&!!i.unsafe,m=!!i&&!!i.enumerable,p=!!i&&!!i.noTargetGet;"function"==typeof o&&("string"!=typeof t||a(o,"name")||c(o,"name",t),l=u(o),l.source||(l.source=d.join("string"==typeof t?t:""))),e!==n?(s?!p&&e[t]&&(m=!0):delete e[t],m?e[t]=o:c(e,t,o)):m?e[t]=o:r(t,o)})(Function.prototype,"toString",(function(){return"function"==typeof this&&s(this).source||i(this)}))},7418:function(e,t){t.f=Object.getOwnPropertySymbols},7839:function(e,t){e.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},"7f9a":function(e,t,o){var n=o("da84"),c=o("8925"),a=n.WeakMap;e.exports="function"===typeof a&&/native code/.test(c(a))},"825a":function(e,t,o){var n=o("861d");e.exports=function(e){if(!n(e))throw TypeError(String(e)+" is not an object");return e}},"83ab":function(e,t,o){var n=o("d039");e.exports=!n((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}))},"861d":function(e,t){e.exports=function(e){return"object"===typeof e?null!==e:"function"===typeof e}},8875:function(e,t,o){var n,c,a;(function(o,r){c=[],n=r,a="function"===typeof n?n.apply(t,c):n,void 0===a||(e.exports=a)})("undefined"!==typeof self&&self,(function(){function e(){var t=Object.getOwnPropertyDescriptor(document,"currentScript");if(!t&&"currentScript"in document&&document.currentScript)return document.currentScript;if(t&&t.get!==e&&document.currentScript)return document.currentScript;try{throw new Error}catch(p){var o,n,c,a=/.*at [^(]*\((.*):(.+):(.+)\)$/gi,r=/@([^@]*):(\d+):(\d+)\s*$/gi,i=a.exec(p.stack)||r.exec(p.stack),l=i&&i[1]||!1,s=i&&i[2]||!1,u=document.location.href.replace(document.location.hash,""),d=document.getElementsByTagName("script");l===u&&(o=document.documentElement.outerHTML,n=new RegExp("(?:[^\\n]+?\\n){0,"+(s-2)+"}[^<]*<script>([\\d\\D]*?)<\\/script>[\\d\\D]*","i"),c=o.replace(n,"$1").trim());for(var m=0;m<d.length;m++){if("interactive"===d[m].readyState)return d[m];if(d[m].src===l)return d[m];if(l===u&&d[m].innerHTML&&d[m].innerHTML.trim()===c)return d[m]}return null}}return e}))},8925:function(e,t,o){var n=o("c6cd"),c=Function.toString;"function"!=typeof n.inspectSource&&(n.inspectSource=function(e){return c.call(e)}),e.exports=n.inspectSource},"8aa5":function(e,t,o){"use strict";var n=o("6547").charAt;e.exports=function(e,t,o){return t+(o?n(e,t).length:1)}},"8bbf":function(t,o){t.exports=e},"90e3":function(e,t){var o=0,n=Math.random();e.exports=function(e){return"Symbol("+String(void 0===e?"":e)+")_"+(++o+n).toString(36)}},9112:function(e,t,o){var n=o("83ab"),c=o("9bf2"),a=o("5c6c");e.exports=n?function(e,t,o){return c.f(e,t,a(1,o))}:function(e,t,o){return e[t]=o,e}},9263:function(e,t,o){"use strict";var n=o("ad6d"),c=o("9f7f"),a=RegExp.prototype.exec,r=String.prototype.replace,i=a,l=function(){var e=/a/,t=/b*/g;return a.call(e,"a"),a.call(t,"a"),0!==e.lastIndex||0!==t.lastIndex}(),s=c.UNSUPPORTED_Y||c.BROKEN_CARET,u=void 0!==/()??/.exec("")[1],d=l||u||s;d&&(i=function(e){var t,o,c,i,d=this,m=s&&d.sticky,p=n.call(d),g=d.source,b=0,f=e;return m&&(p=p.replace("y",""),-1===p.indexOf("g")&&(p+="g"),f=String(e).slice(d.lastIndex),d.lastIndex>0&&(!d.multiline||d.multiline&&"\n"!==e[d.lastIndex-1])&&(g="(?: "+g+")",f=" "+f,b++),o=new RegExp("^(?:"+g+")",p)),u&&(o=new RegExp("^"+g+"$(?!\\s)",p)),l&&(t=d.lastIndex),c=a.call(m?o:d,f),m?c?(c.input=c.input.slice(b),c[0]=c[0].slice(b),c.index=d.lastIndex,d.lastIndex+=c[0].length):d.lastIndex=0:l&&c&&(d.lastIndex=d.global?c.index+c[0].length:t),u&&c&&c.length>1&&r.call(c[0],o,(function(){for(i=1;i<arguments.length-2;i++)void 0===arguments[i]&&(c[i]=void 0)})),c}),e.exports=i},"94ca":function(e,t,o){var n=o("d039"),c=/#|\.prototype\./,a=function(e,t){var o=i[r(e)];return o==s||o!=l&&("function"==typeof t?n(t):!!t)},r=a.normalize=function(e){return String(e).replace(c,".").toLowerCase()},i=a.data={},l=a.NATIVE="N",s=a.POLYFILL="P";e.exports=a},"9bf2":function(e,t,o){var n=o("83ab"),c=o("0cfb"),a=o("825a"),r=o("c04e"),i=Object.defineProperty;t.f=n?i:function(e,t,o){if(a(e),t=r(t,!0),a(o),c)try{return i(e,t,o)}catch(n){}if("get"in o||"set"in o)throw TypeError("Accessors not supported");return"value"in o&&(e[t]=o.value),e}},"9f7f":function(e,t,o){"use strict";var n=o("d039");function c(e,t){return RegExp(e,t)}t.UNSUPPORTED_Y=n((function(){var e=c("a","y");return e.lastIndex=2,null!=e.exec("abcd")})),t.BROKEN_CARET=n((function(){var e=c("^r","gy");return e.lastIndex=2,null!=e.exec("str")}))},a15b:function(e,t,o){"use strict";var n=o("23e7"),c=o("44ad"),a=o("fc6a"),r=o("a640"),i=[].join,l=c!=Object,s=r("join",",");n({target:"Array",proto:!0,forced:l||!s},{join:function(e){return i.call(a(this),void 0===e?",":e)}})},a640:function(e,t,o){"use strict";var n=o("d039");e.exports=function(e,t){var o=[][e];return!!o&&n((function(){o.call(null,t||function(){throw 1},1)}))}},a691:function(e,t){var o=Math.ceil,n=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?n:o)(e)}},ac1f:function(e,t,o){"use strict";var n=o("23e7"),c=o("9263");n({target:"RegExp",proto:!0,forced:/./.exec!==c},{exec:c})},ad6d:function(e,t,o){"use strict";var n=o("825a");e.exports=function(){var e=n(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t}},b622:function(e,t,o){var n=o("da84"),c=o("5692"),a=o("5135"),r=o("90e3"),i=o("4930"),l=o("fdbf"),s=c("wks"),u=n.Symbol,d=l?u:u&&u.withoutSetter||r;e.exports=function(e){return a(s,e)||(i&&a(u,e)?s[e]=u[e]:s[e]=d("Symbol."+e)),s[e]}},c04e:function(e,t,o){var n=o("861d");e.exports=function(e,t){if(!n(e))return e;var o,c;if(t&&"function"==typeof(o=e.toString)&&!n(c=o.call(e)))return c;if("function"==typeof(o=e.valueOf)&&!n(c=o.call(e)))return c;if(!t&&"function"==typeof(o=e.toString)&&!n(c=o.call(e)))return c;throw TypeError("Can't convert object to primitive value")}},c430:function(e,t){e.exports=!1},c6b6:function(e,t){var o={}.toString;e.exports=function(e){return o.call(e).slice(8,-1)}},c6cd:function(e,t,o){var n=o("da84"),c=o("ce4e"),a="__core-js_shared__",r=n[a]||c(a,{});e.exports=r},c8ba:function(e,t){var o;o=function(){return this}();try{o=o||new Function("return this")()}catch(n){"object"===typeof window&&(o=window)}e.exports=o},ca84:function(e,t,o){var n=o("5135"),c=o("fc6a"),a=o("4d64").indexOf,r=o("d012");e.exports=function(e,t){var o,i=c(e),l=0,s=[];for(o in i)!n(r,o)&&n(i,o)&&s.push(o);while(t.length>l)n(i,o=t[l++])&&(~a(s,o)||s.push(o));return s}},cc12:function(e,t,o){var n=o("da84"),c=o("861d"),a=n.document,r=c(a)&&c(a.createElement);e.exports=function(e){return r?a.createElement(e):{}}},ce4e:function(e,t,o){var n=o("da84"),c=o("9112");e.exports=function(e,t){try{c(n,e,t)}catch(o){n[e]=t}return t}},d012:function(e,t){e.exports={}},d039:function(e,t){e.exports=function(e){try{return!!e()}catch(t){return!0}}},d066:function(e,t,o){var n=o("428f"),c=o("da84"),a=function(e){return"function"==typeof e?e:void 0};e.exports=function(e,t){return arguments.length<2?a(n[e])||a(c[e]):n[e]&&n[e][t]||c[e]&&c[e][t]}},d1e7:function(e,t,o){"use strict";var n={}.propertyIsEnumerable,c=Object.getOwnPropertyDescriptor,a=c&&!n.call({1:2},1);t.f=a?function(e){var t=c(this,e);return!!t&&t.enumerable}:n},d784:function(e,t,o){"use strict";o("ac1f");var n=o("6eeb"),c=o("d039"),a=o("b622"),r=o("9263"),i=o("9112"),l=a("species"),s=!c((function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")})),u=function(){return"$0"==="a".replace(/./,"$0")}(),d=a("replace"),m=function(){return!!/./[d]&&""===/./[d]("a","$0")}(),p=!c((function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var o="ab".split(e);return 2!==o.length||"a"!==o[0]||"b"!==o[1]}));e.exports=function(e,t,o,d){var g=a(e),b=!c((function(){var t={};return t[g]=function(){return 7},7!=""[e](t)})),f=b&&!c((function(){var t=!1,o=/a/;return"split"===e&&(o={},o.constructor={},o.constructor[l]=function(){return o},o.flags="",o[g]=/./[g]),o.exec=function(){return t=!0,null},o[g](""),!t}));if(!b||!f||"replace"===e&&(!s||!u||m)||"split"===e&&!p){var v=/./[g],h=o(g,""[e],(function(e,t,o,n,c){return t.exec===r?b&&!c?{done:!0,value:v.call(t,o,n)}:{done:!0,value:e.call(o,t,n)}:{done:!1}}),{REPLACE_KEEPS_$0:u,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:m}),j=h[0],O=h[1];n(String.prototype,e,j),n(RegExp.prototype,g,2==t?function(e,t){return O.call(e,this,t)}:function(e){return O.call(e,this)})}d&&i(RegExp.prototype[g],"sham",!0)}},da84:function(e,t,o){(function(t){var o=function(e){return e&&e.Math==Math&&e};e.exports=o("object"==typeof globalThis&&globalThis)||o("object"==typeof window&&window)||o("object"==typeof self&&self)||o("object"==typeof t&&t)||function(){return this}()||Function("return this")()}).call(this,o("c8ba"))},e893:function(e,t,o){var n=o("5135"),c=o("56ef"),a=o("06cf"),r=o("9bf2");e.exports=function(e,t){for(var o=c(t),i=r.f,l=a.f,s=0;s<o.length;s++){var u=o[s];n(e,u)||i(e,u,l(t,u))}}},f772:function(e,t,o){var n=o("5692"),c=o("90e3"),a=n("keys");e.exports=function(e){return a[e]||(a[e]=c(e))}},fb15:function(e,t,o){"use strict";if(o.r(t),"undefined"!==typeof window){var n=window.document.currentScript,c=o("8875");n=c(),"currentScript"in document||Object.defineProperty(document,"currentScript",{get:c});var a=n&&n.src.match(/(.+\/)[^/]+\.js(\?.*)?$/);a&&(o.p=a[1])}var r=o("8bbf"),i=Object(r["withScopeId"])("data-v-7d4a7f28"),l=i((function(e,t,o,n,c,a){return Object(r["openBlock"])(),Object(r["createBlock"])(Object(r["resolveDynamicComponent"])(e.tag),{contenteditable:e.contenteditable,onInput:e.update,onBlur:e.update,onPaste:e.onPaste,onKeypress:e.onKeypress,ref:"element"},null,8,["contenteditable","onInput","onBlur","onPaste","onKeypress"])}));function s(e,t,o){return e.split(t).join(o)}o("a15b"),o("ac1f"),o("1276");var u=Object(r["defineComponent"])({name:"contenteditable",props:{tag:String,contenteditable:{type:Boolean,default:!0},modelValue:String,noHTML:{type:Boolean,default:!0},noNL:{type:Boolean,default:!1}},emits:{returned:String,"update:modelValue":String},setup:function(e,t){var o=t.emit,n=Object(r["ref"])(null);function c(){return e.noHTML?n.value.innerText:n.value.innerHTML}function a(t){e.noHTML?n.value.innerText=t:n.value.innerHTML=t}function i(e){o("update:modelValue",c())}function l(t){t.preventDefault();var o=(t.originalEvent||t).clipboardData.getData("text/plain");e.noNL&&(o=s(o,"\r\n"," "),o=s(o,"\n"," "),o=s(o,"\r"," ")),window.document.execCommand("insertText",!1,o)}function u(t){"Enter"==t.key&&e.noNL&&(t.preventDefault(),o("returned",c()))}return Object(r["onMounted"])((function(){var t;a(null!==(t=e.modelValue)&&void 0!==t?t:"")})),Object(r["watch"])((function(){return e.modelValue}),(function(e,t){e!=c()&&a(null!==e&&void 0!==e?e:"")})),{update:i,onPaste:l,onKeypress:u,element:n}}});u.render=l,u.__scopeId="data-v-7d4a7f28";var d=u,m=d;t["default"]=m},fc6a:function(e,t,o){var n=o("44ad"),c=o("1d80");e.exports=function(e){return n(c(e))}},fdbf:function(e,t,o){var n=o("4930");e.exports=n&&!Symbol.sham&&"symbol"==typeof Symbol.iterator}})}))},"504b":function(e,t,o){},5494:function(e,t,o){"use strict";var n=o("83ab"),c=o("e330"),a=o("edd0"),r=URLSearchParams.prototype,i=c(r.forEach);n&&!("size"in r)&&a(r,"size",{get:function(){var e=0;return i(this,(function(){e++})),e},configurable:!0,enumerable:!0})},"5d4b":function(e,t,o){"use strict";o.d(t,"a",(function(){return g}));var n=o("23f9"),c=o("7a23"),a=o("1fba"),r=o("e5f6"),i=o("d243"),l=o("9a1c");const[s,u]=Object(a["a"])("tag"),d={size:String,mark:Boolean,show:r["g"],type:Object(r["e"])("default"),color:String,plain:Boolean,round:Boolean,textColor:String,closeable:Boolean};var m=Object(c["defineComponent"])({name:s,props:d,emits:["close"],setup(e,{slots:t,emit:o}){const n=e=>{e.stopPropagation(),o("close",e)},a=()=>e.plain?{color:e.textColor||e.color,borderColor:e.color}:{color:e.textColor,background:e.color},r=()=>{var o;const{type:r,mark:s,plain:d,round:m,size:p,closeable:g}=e,b={mark:s,plain:d,round:m};p&&(b[p]=p);const f=g&&Object(c["createVNode"])(l["a"],{name:"cross",class:[u("close"),i["h"]],onClick:n},null);return Object(c["createVNode"])("span",{style:a(),class:u([b,r])},[null==(o=t.default)?void 0:o.call(t),f])};return()=>Object(c["createVNode"])(c["Transition"],{name:e.closeable?"van-fade":void 0},{default:()=>[e.show?r():null]})}});const p=Object(n["a"])(m);var g=p},"75ad":function(e,t,o){},"786d":function(e,t,o){},8270:function(e,t,o){},"866e":function(e,t,o){"use strict";o("3393")},"8d07":function(e,t,o){"use strict";o.r(t);var n=o("7a23");const c={class:"chatDetailWrap"},a={class:"msgWrap"},r={class:"msgWrap"},i={style:{background:"red","font-size":"30px"}},l={class:"sendMsgWrap"},s={class:"richMsgWrap"},u=["src"];function d(e,t,o,d,m,p){var g,b;const f=Object(n["resolveComponent"])("Icon"),v=Object(n["resolveComponent"])("NavBar"),h=Object(n["resolveComponent"])("Field"),j=Object(n["resolveComponent"])("Dialog"),O=Object(n["resolveComponent"])("MsgLeft"),y=Object(n["resolveComponent"])("Tag"),w=Object(n["resolveComponent"])("Popup"),x=Object(n["resolveComponent"])("MsgRight"),M=Object(n["resolveComponent"])("GridItem"),k=Object(n["resolveComponent"])("Grid"),S=Object(n["resolveComponent"])("Popover"),V=Object(n["resolveComponent"])("Uploader"),E=Object(n["resolveComponent"])("Input");return Object(n["openBlock"])(),Object(n["createElementBlock"])("div",c,[Object(n["createVNode"])(v,{title:e.chat.fromId,"left-arrow":"",onClickLeft:e.chat.toChat},{right:Object(n["withCtx"])(()=>[Object(n["createVNode"])(f,{class:"icon",onClick:e.chat.showPinedMessageList,size:"20",name:"smile-comment-o"},null,8,["onClick"])]),_:1},8,["title","onClickLeft"]),Object(n["createVNode"])(j,{onConfirm:e.chat.modifyMessage,show:e.chat.isShowModifyModal,"onUpdate:show":t[4]||(t[4]=t=>e.chat.isShowModifyModal=t),title:"编辑消息","show-cancel-button":""},{default:Object(n["withCtx"])(()=>[Object(n["createVNode"])(h,{label:"文本消息内容",modelValue:e.chat.modifiedText,"onUpdate:modelValue":t[0]||(t[0]=t=>e.chat.modifiedText=t),placeholder:"请输入文本消息内容"},null,8,["modelValue"]),Object(n["createVNode"])(h,{label:"自定义消息Event",modelValue:e.chat.modifiedEvent,"onUpdate:modelValue":t[1]||(t[1]=t=>e.chat.modifiedEvent=t),placeholder:"请输入自定义消息Event"},null,8,["modelValue"]),Object(n["createVNode"])(h,{label:"自定义消息Exts",modelValue:e.chat.modifiedExts,"onUpdate:modelValue":t[2]||(t[2]=t=>e.chat.modifiedExts=t),placeholder:"请输入自定义消息Exts"},null,8,["modelValue"]),Object(n["createVNode"])(h,{label:"消息ext内容",modelValue:e.chat.modifiedExt,"onUpdate:modelValue":t[3]||(t[3]=t=>e.chat.modifiedExt=t),placeholder:"请输入ext内容"},null,8,["modelValue"])]),_:1},8,["onConfirm","show"]),Object(n["createVNode"])(w,{show:e.chat.isShowPinnedMessage,"onUpdate:show":t[5]||(t[5]=t=>e.chat.isShowPinnedMessage=t),position:"bottom",style:{minHeight:"30%",maxHeight:"70%"}},{default:Object(n["withCtx"])(()=>{var t;return[Object(n["createElementVNode"])("div",a,[(Object(n["openBlock"])(!0),Object(n["createElementBlock"])(n["Fragment"],null,Object(n["renderList"])(null===(t=e.chat.pinInfo[`${e.chat.chatType}${e.chat.fromId}`])||void 0===t?void 0:t.messageList,t=>(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",{style:{"text-align":"left"},key:t.message.id},[Object(n["createVNode"])(O,{msg:t.message,timestamp:t.message.time,isPinned:!0,onUnpinMessage:o=>e.chat.unpinMessage(t.message.id),onPreviewCombineMsg:e.chat.previewCombineMsg},null,8,["msg","timestamp","onUnpinMessage","onPreviewCombineMsg"]),Object(n["createVNode"])(y,null,{default:Object(n["withCtx"])(()=>[Object(n["createTextVNode"])(" 置顶时间: "+Object(n["toDisplayString"])(t.pinTime)+" 操作人: "+Object(n["toDisplayString"])(t.operatorId),1)]),_:2},1024)]))),128))])]}),_:1},8,["show"]),Object(n["createElementVNode"])("div",r,[Object(n["createElementVNode"])("span",i,Object(n["toDisplayString"])(null===(g=e.chat.chatInfo[`${e.chat.chatType}${e.chat.fromId}`])||void 0===g?void 0:g.messageList.length),1),(Object(n["openBlock"])(!0),Object(n["createElementBlock"])(n["Fragment"],null,Object(n["renderList"])(null===(b=e.chat.chatInfo[`${e.chat.chatType}${e.chat.fromId}`])||void 0===b?void 0:b.messageList,t=>{var o,c;return Object(n["openBlock"])(),Object(n["createElementBlock"])("div",{key:t.id},[t.from===e.chat.currentUser||""===t.from?(Object(n["openBlock"])(),Object(n["createBlock"])(x,{key:0,msg:t,timestamp:t.time,isPinned:null===(o=e.chat.pinMessageIdsMap[`${e.chat.chatType}${e.chat.fromId}`])||void 0===o?void 0:o.includes(t.id),onPreviewImg:e.chat.previewImage,onRecallMessage:o=>e.chat.revokeMsg(t.id),onModifyMessage:o=>e.chat.showModifyModal(t.id),onPreviewCombineMsg:e.chat.previewCombineMsg,onPinMessage:o=>e.chat.pinMessage(t.id)},null,8,["msg","timestamp","isPinned","onPreviewImg","onRecallMessage","onModifyMessage","onPreviewCombineMsg","onPinMessage"])):(Object(n["openBlock"])(),Object(n["createBlock"])(O,{key:1,msg:t,timestamp:t.time,isPinned:null===(c=e.chat.pinMessageIdsMap[`${e.chat.chatType}${e.chat.fromId}`])||void 0===c?void 0:c.includes(t.id),onPreviewImg:e.chat.previewImage,onPreviewCombineMsg:e.chat.previewCombineMsg,onPinMessage:o=>e.chat.pinMessage(t.id)},null,8,["msg","timestamp","isPinned","onPreviewImg","onPreviewCombineMsg","onPinMessage"]))])}),128))]),Object(n["createElementVNode"])("div",l,[Object(n["createElementVNode"])("div",s,[Object(n["createVNode"])(S,{show:e.chat.emojiShow,"onUpdate:show":t[7]||(t[7]=t=>e.chat.emojiShow=t),placement:"top-start"},{reference:Object(n["withCtx"])(()=>[Object(n["createVNode"])(f,{class:"icon",size:"20",name:"smile-o"})]),default:Object(n["withCtx"])(()=>[Object(n["createVNode"])(k,{square:"",clickable:"",border:!1,"column-num":"10",style:{width:"240px","padding-bottom":"5px"}},{default:Object(n["withCtx"])(()=>[(Object(n["openBlock"])(!0),Object(n["createElementBlock"])(n["Fragment"],null,Object(n["renderList"])(e.chat.emojiLs,o=>(Object(n["openBlock"])(),Object(n["createBlock"])(M,{key:o,onClick:t=>e.chat.sendEmoji(o.url)},{default:Object(n["withCtx"])(()=>[Object(n["createElementVNode"])("img",{class:"emoji",src:o.url,onClick:t[6]||(t[6]=(...t)=>e.chat.selectEmoji&&e.chat.selectEmoji(...t))},null,8,u)]),_:2},1032,["onClick"]))),128))]),_:1})]),_:1},8,["show"]),Object(n["createVNode"])(V,{"after-read":e.chat.afterReadImg},{default:Object(n["withCtx"])(()=>[Object(n["createVNode"])(f,{class:"icon",size:"20",name:"photo-o"})]),_:1},8,["after-read"]),Object(n["createVNode"])(V,{accept:"video/*","after-read":e.chat.afterReadVideo},{default:Object(n["withCtx"])(()=>[Object(n["createVNode"])(f,{class:"icon",size:"20",name:"video-o"})]),_:1},8,["after-read"]),Object(n["createVNode"])(V,{"after-read":e.chat.afterReadAttach,accept:"*"},{default:Object(n["withCtx"])(()=>[Object(n["createVNode"])(f,{class:"icon",size:"20",name:"idcard"})]),_:1},8,["after-read"]),Object(n["createVNode"])(f,{class:"icon",size:"20",name:"balance-o",onClick:e.chat.sendCustomMsg},null,8,["onClick"]),Object(n["createVNode"])(f,{class:"icon",size:"20",name:"replay",onClick:e.chat.sendCmdMsg},null,8,["onClick"]),Object(n["createVNode"])(f,{class:"icon",size:"20",name:"service-o",onClick:e.chat.sendAudioMsg},null,8,["onClick"]),Object(n["createVNode"])(f,{class:"icon",size:"20",name:"share-o",onClick:e.chat.sendCombineMsg},null,8,["onClick"]),Object(n["createVNode"])(f,{class:"icon",size:"20",name:"guide-o",onClick:e.chat.sendLocationMsg},null,8,["onClick"]),Object(n["createElementVNode"])("span",{onClick:t[8]||(t[8]=(...t)=>e.chat.sendAck&&e.chat.sendAck(...t))},"ack")]),Object(n["createElementVNode"])("div",{class:"sendBtn",onClick:t[9]||(t[9]=(...t)=>e.chat.onSendClick&&e.chat.onSendClick(...t))},"发送"),Object(n["createVNode"])(E,{ref:"ipt",onSend:e.chat.sendMsg},null,8,["onSend"])])])}o("a3b5");var m=o("5d4b"),p=(o("68ef"),o("cb51"),o("3743"),o("a71a"),o("4d75"),o("5f24")),g=(o("ec5d"),o("2e9e")),b=(o("09fe"),o("e3b3"),o("8270"),o("786d"),o("504b"),o("bcd3"),o("23f9")),f=o("e5f6"),v=o("fa7c"),h=o("b75f"),j=o("5aa0"),O=o("1fba");const[y,w,x]=Object(O["a"])("uploader");function M(e,t){return new Promise(o=>{if("file"===t)return void o();const n=new FileReader;n.onload=e=>{o(e.target.result)},"dataUrl"===t?n.readAsDataURL(e):"text"===t&&n.readAsText(e)})}function k(e,t){return Object(v["f"])(e).some(e=>!!e.file&&(Object(h["b"])(t)?t(e.file):e.file.size>t))}function S(e,t){const o=[],n=[];return e.forEach(e=>{k(e,t)?n.push(e):o.push(e)}),{valid:o,invalid:n}}const V=/\.(jpeg|jpg|gif|png|svg|webp|jfif|bmp|dpg|avif)/i,E=e=>V.test(e);function C(e){return!!e.isImage||(e.file&&e.file.type?0===e.file.type.indexOf("image"):e.url?E(e.url):"string"===typeof e.content&&0===e.content.indexOf("data:image"))}var N=o("450f"),I=o("efd9"),T=o("9a1c"),P=o("6872"),B=o("9b55"),R=o("d243"),_=o("8db7"),L=o("d7d5"),D=o("ee0b");const[U,z]=Object(O["a"])("swipe"),A={loop:f["g"],width:f["f"],height:f["f"],vertical:Boolean,autoplay:Object(f["c"])(0),duration:Object(f["c"])(500),touchable:f["g"],lazyRender:Boolean,initialSwipe:Object(f["c"])(0),indicatorColor:String,showIndicators:f["g"],stopPropagation:f["g"]},$=Symbol(U);var F=Object(n["defineComponent"])({name:U,props:A,emits:["change"],setup(e,{emit:t,slots:o}){const c=Object(n["ref"])(),a=Object(n["ref"])(),r=Object(n["reactive"])({rect:null,width:0,height:0,offset:0,active:0,swiping:!1}),i=Object(L["a"])(),{children:l,linkChildren:s}=Object(N["useChildren"])($),u=Object(n["computed"])(()=>l.length),d=Object(n["computed"])(()=>r[e.vertical?"height":"width"]),m=Object(n["computed"])(()=>e.vertical?i.deltaY.value:i.deltaX.value),p=Object(n["computed"])(()=>{if(r.rect){const t=e.vertical?r.rect.height:r.rect.width;return t-d.value*u.value}return 0}),g=Object(n["computed"])(()=>Math.ceil(Math.abs(p.value)/d.value)),b=Object(n["computed"])(()=>u.value*d.value),f=Object(n["computed"])(()=>(r.active+u.value)%u.value),v=Object(n["computed"])(()=>{const t=e.vertical?"vertical":"horizontal";return i.direction.value===t}),h=Object(n["computed"])(()=>{const t={transitionDuration:(r.swiping?0:e.duration)+"ms",transform:`translate${e.vertical?"Y":"X"}(${r.offset}px)`};if(d.value){const o=e.vertical?"height":"width",n=e.vertical?"width":"height";t[o]=b.value+"px",t[n]=e[n]?e[n]+"px":""}return t}),O=t=>{const{active:o}=r;return t?e.loop?Object(j["c"])(o+t,-1,u.value):Object(j["c"])(o+t,0,g.value):o},y=(t,o=0)=>{let n=t*d.value;e.loop||(n=Math.min(n,-p.value));let c=o-n;return e.loop||(c=Object(j["c"])(c,p.value,0)),c},w=({pace:o=0,offset:n=0,emitChange:c})=>{if(u.value<=1)return;const{active:a}=r,i=O(o),s=y(i,n);if(e.loop){if(l[0]&&s!==p.value){const e=s<p.value;l[0].setOffset(e?b.value:0)}if(l[u.value-1]&&0!==s){const e=s>0;l[u.value-1].setOffset(e?-b.value:0)}}r.active=i,r.offset=s,c&&i!==a&&t("change",f.value)},x=()=>{r.swiping=!0,r.active<=-1?w({pace:u.value}):r.active>=u.value&&w({pace:-u.value})},M=()=>{x(),i.reset(),Object(N["doubleRaf"])(()=>{r.swiping=!1,w({pace:-1,emitChange:!0})})},k=()=>{x(),i.reset(),Object(N["doubleRaf"])(()=>{r.swiping=!1,w({pace:1,emitChange:!0})})};let S;const V=()=>clearTimeout(S),E=()=>{V(),e.autoplay>0&&u.value>1&&(S=setTimeout(()=>{k(),E()},+e.autoplay))},C=(t=+e.initialSwipe)=>{if(!c.value)return;const o=()=>{var o,n;if(!Object(_["b"])(c)){const t={width:c.value.offsetWidth,height:c.value.offsetHeight};r.rect=t,r.width=+(null!=(o=e.width)?o:t.width),r.height=+(null!=(n=e.height)?n:t.height)}u.value&&(t=Math.min(u.value-1,t)),r.active=t,r.swiping=!0,r.offset=y(t),l.forEach(e=>{e.setOffset(0)}),E()};Object(_["b"])(c)?Object(n["nextTick"])().then(o):o()},T=()=>C(r.active);let P;const B=t=>{e.touchable&&(i.start(t),P=Date.now(),V(),x())},R=t=>{if(e.touchable&&r.swiping&&(i.move(t),v.value)){const o=!e.loop&&(0===r.active&&m.value>0||r.active===u.value-1&&m.value<0);o||(Object(_["c"])(t,e.stopPropagation),w({offset:m.value}))}},U=()=>{if(!e.touchable||!r.swiping)return;const t=Date.now()-P,o=m.value/t,n=Math.abs(o)>.25||Math.abs(m.value)>d.value/2;if(n&&v.value){const t=e.vertical?i.offsetY.value:i.offsetX.value;let o=0;o=e.loop?t>0?m.value>0?-1:1:0:-Math[m.value>0?"ceil":"floor"](m.value/d.value),w({pace:o,emitChange:!0})}else m.value&&w({pace:0});r.swiping=!1,E()},A=(t,o={})=>{x(),i.reset(),Object(N["doubleRaf"])(()=>{let n;n=e.loop&&t===u.value?0===r.active?0:t:t%u.value,o.immediate?Object(N["doubleRaf"])(()=>{r.swiping=!1}):r.swiping=!1,w({pace:n-r.active,emitChange:!0})})},F=(t,o)=>{const c=o===f.value,a=c?{backgroundColor:e.indicatorColor}:void 0;return Object(n["createVNode"])("i",{style:a,class:z("indicator",{active:c})},null)},W=()=>o.indicator?o.indicator({active:f.value,total:u.value}):e.showIndicators&&u.value>1?Object(n["createVNode"])("div",{class:z("indicators",{vertical:e.vertical})},[Array(u.value).fill("").map(F)]):void 0;return Object(I["a"])({prev:M,next:k,state:r,resize:T,swipeTo:A}),s({size:d,props:e,count:u,activeIndicator:f}),Object(n["watch"])(()=>e.initialSwipe,e=>C(+e)),Object(n["watch"])(u,()=>C(r.active)),Object(n["watch"])(()=>e.autoplay,E),Object(n["watch"])([_["g"],_["f"]],T),Object(n["watch"])(Object(N["usePageVisibility"])(),e=>{"visible"===e?E():V()}),Object(n["onMounted"])(C),Object(n["onActivated"])(()=>C(r.active)),Object(D["b"])(()=>C(r.active)),Object(n["onDeactivated"])(V),Object(n["onBeforeUnmount"])(V),Object(N["useEventListener"])("touchmove",R,{target:a}),()=>{var t;return Object(n["createVNode"])("div",{ref:c,class:z()},[Object(n["createVNode"])("div",{ref:a,style:h.value,class:z("track",{vertical:e.vertical}),onTouchstartPassive:B,onTouchend:U,onTouchcancel:U},[null==(t=o.default)?void 0:t.call(o)]),W()])}}});const W=Object(b["a"])(F);const[H,Y]=Object(O["a"])("image"),X={src:String,alt:String,fit:String,position:String,round:Boolean,block:Boolean,width:f["f"],height:f["f"],radius:f["f"],lazyLoad:Boolean,iconSize:f["f"],showError:f["g"],errorIcon:Object(f["e"])("photo-fail"),iconPrefix:String,showLoading:f["g"],loadingIcon:Object(f["e"])("photo")};var q=Object(n["defineComponent"])({name:H,props:X,emits:["load","error"],setup(e,{emit:t,slots:o}){const c=Object(n["ref"])(!1),a=Object(n["ref"])(!0),r=Object(n["ref"])(),{$Lazyload:i}=Object(n["getCurrentInstance"])().proxy,l=Object(n["computed"])(()=>{const t={width:Object(j["a"])(e.width),height:Object(j["a"])(e.height)};return Object(h["a"])(e.radius)&&(t.overflow="hidden",t.borderRadius=Object(j["a"])(e.radius)),t});Object(n["watch"])(()=>e.src,()=>{c.value=!1,a.value=!0});const s=e=>{a.value=!1,t("load",e)},u=e=>{c.value=!0,a.value=!1,t("error",e)},d=(t,o,c)=>c?c():Object(n["createVNode"])(T["a"],{name:t,size:e.iconSize,class:o,classPrefix:e.iconPrefix},null),m=()=>a.value&&e.showLoading?Object(n["createVNode"])("div",{class:Y("loading")},[d(e.loadingIcon,Y("loading-icon"),o.loading)]):c.value&&e.showError?Object(n["createVNode"])("div",{class:Y("error")},[d(e.errorIcon,Y("error-icon"),o.error)]):void 0,p=()=>{if(c.value||!e.src)return;const t={alt:e.alt,class:Y("img"),style:{objectFit:e.fit,objectPosition:e.position}};return e.lazyLoad?Object(n["withDirectives"])(Object(n["createVNode"])("img",Object(n["mergeProps"])({ref:r},t),null),[[Object(n["resolveDirective"])("lazy"),e.src]]):Object(n["createVNode"])("img",Object(n["mergeProps"])({src:e.src,onLoad:s,onError:u},t),null)},g=({el:e})=>{const t=()=>{e===r.value&&a.value&&s()};r.value?t():Object(n["nextTick"])(t)},b=({el:e})=>{e!==r.value||c.value||u()};return i&&v["c"]&&(i.$on("loaded",g),i.$on("error",b),Object(n["onBeforeUnmount"])(()=>{i.$off("loaded",g),i.$off("error",b)})),()=>{var t;return Object(n["createVNode"])("div",{class:Y({round:e.round,block:e.block}),style:l.value},[p(),m(),null==(t=o.default)?void 0:t.call(o)])}}});const J=Object(b["a"])(q);var Z=o("5913");const[G,K]=Object(O["a"])("swipe-item");var Q=Object(n["defineComponent"])({name:G,setup(e,{slots:t}){let o;const c=Object(n["reactive"])({offset:0,inited:!1,mounted:!1}),{parent:a,index:r}=Object(N["useParent"])($);if(!a)return void 0;const i=Object(n["computed"])(()=>{const e={},{vertical:t}=a.props;return a.size.value&&(e[t?"height":"width"]=a.size.value+"px"),c.offset&&(e.transform=`translate${t?"Y":"X"}(${c.offset}px)`),e}),l=Object(n["computed"])(()=>{const{loop:e,lazyRender:t}=a.props;if(!t||o)return!0;if(!c.mounted)return!1;const n=a.activeIndicator.value,i=a.count.value-1,l=0===n&&e?i:n-1,s=n===i&&e?0:n+1;return o=r.value===n||r.value===l||r.value===s,o}),s=e=>{c.offset=e};return Object(n["onMounted"])(()=>{Object(n["nextTick"])(()=>{c.mounted=!0})}),Object(I["a"])({setOffset:s}),()=>{var e;return Object(n["createVNode"])("div",{class:K(),style:i.value},[l.value?null==(e=t.default)?void 0:e.call(t):null])}}});const ee=Object(b["a"])(Q);const te=e=>Math.sqrt((e[0].clientX-e[1].clientX)**2+(e[0].clientY-e[1].clientY)**2),oe=Object(O["a"])("image-preview")[1];var ne=Object(n["defineComponent"])({props:{src:String,show:Boolean,active:Number,minZoom:Object(f["d"])(f["f"]),maxZoom:Object(f["d"])(f["f"]),rootWidth:Object(f["d"])(Number),rootHeight:Object(f["d"])(Number)},emits:["scale","close"],setup(e,{emit:t,slots:o}){const c=Object(n["reactive"])({scale:1,moveX:0,moveY:0,moving:!1,zooming:!1,imageRatio:0,displayWidth:0,displayHeight:0}),a=Object(L["a"])(),r=Object(n["ref"])(),i=Object(n["computed"])(()=>{const{rootWidth:t,rootHeight:o}=e,n=o/t;return c.imageRatio>n}),l=Object(n["computed"])(()=>{const{scale:e,moveX:t,moveY:o,moving:n,zooming:a}=c,r={transitionDuration:a||n?"0s":".3s"};if(1!==e){const n=t/e,c=o/e;r.transform=`scale(${e}, ${e}) translate(${n}px, ${c}px)`}return r}),s=Object(n["computed"])(()=>{if(c.imageRatio){const{rootWidth:t,rootHeight:o}=e,n=i.value?o/c.imageRatio:t;return Math.max(0,(c.scale*n-t)/2)}return 0}),u=Object(n["computed"])(()=>{if(c.imageRatio){const{rootWidth:t,rootHeight:o}=e,n=i.value?o:t*c.imageRatio;return Math.max(0,(c.scale*n-o)/2)}return 0}),d=o=>{o=Object(j["c"])(o,+e.minZoom,+e.maxZoom+1),o!==c.scale&&(c.scale=o,t("scale",{scale:o,index:e.active}))},m=()=>{d(1),c.moveX=0,c.moveY=0},p=()=>{const e=c.scale>1?1:2;d(e),c.moveX=0,c.moveY=0};let g,b,f,v,h,O,y;const w=e=>{const{touches:t}=e,{offsetX:o}=a;a.start(e),g=t.length,b=c.moveX,f=c.moveY,y=Date.now(),c.moving=1===g&&1!==c.scale,c.zooming=2===g&&!o.value,c.zooming&&(v=c.scale,h=te(e.touches))},x=e=>{const{touches:t}=e;if(a.move(e),(c.moving||c.zooming)&&Object(_["c"])(e,!0),c.moving){const{deltaX:e,deltaY:t}=a,o=e.value+b,n=t.value+f;c.moveX=Object(j["c"])(o,-s.value,s.value),c.moveY=Object(j["c"])(n,-u.value,u.value)}if(c.zooming&&2===t.length){const e=te(t),o=v*e/h;d(o)}},M=()=>{if(g>1)return;const{offsetX:e,offsetY:o}=a,n=Date.now()-y,c=250,r=5;e.value<r&&o.value<r&&n<c&&(O?(clearTimeout(O),O=null,p()):O=setTimeout(()=>{t("close"),O=null},c))},k=t=>{let o=!1;(c.moving||c.zooming)&&(o=!0,c.moving&&b===c.moveX&&f===c.moveY&&(o=!1),t.touches.length||(c.zooming&&(c.moveX=Object(j["c"])(c.moveX,-s.value,s.value),c.moveY=Object(j["c"])(c.moveY,-u.value,u.value),c.zooming=!1),c.moving=!1,b=0,f=0,v=1,c.scale<1&&m(),c.scale>e.maxZoom&&(c.scale=+e.maxZoom))),Object(_["c"])(t,o),M(),a.reset()},S=e=>{const{naturalWidth:t,naturalHeight:o}=e.target;c.imageRatio=o/t};return Object(n["watch"])(()=>e.active,m),Object(n["watch"])(()=>e.show,e=>{e||m()}),Object(N["useEventListener"])("touchmove",x,{target:Object(n["computed"])(()=>{var e;return null==(e=r.value)?void 0:e.$el})}),()=>{const t={loading:()=>Object(n["createVNode"])(Z["a"],{type:"spinner"},null)};return Object(n["createVNode"])(ee,{ref:r,class:oe("swipe-item"),onTouchstartPassive:w,onTouchend:k,onTouchcancel:k},{default:()=>[o.image?Object(n["createVNode"])("div",{class:oe("image-wrap")},[o.image({src:e.src})]):Object(n["createVNode"])(J,{src:e.src,fit:"contain",class:oe("image",{vertical:i.value}),style:l.value,onLoad:S},t)]})}}});const[ce,ae]=Object(O["a"])("image-preview"),re=["show","transition","overlayStyle","closeOnPopstate"],ie={show:Boolean,loop:f["g"],images:Object(f["a"])(),minZoom:Object(f["c"])(1/3),maxZoom:Object(f["c"])(3),overlay:f["g"],closeable:Boolean,showIndex:f["g"],className:f["h"],closeIcon:Object(f["e"])("clear"),transition:String,beforeClose:Function,overlayClass:f["h"],overlayStyle:Object,swipeDuration:Object(f["c"])(300),startPosition:Object(f["c"])(0),showIndicators:Boolean,closeOnPopstate:f["g"],closeIconPosition:Object(f["e"])("top-right")};var le=Object(n["defineComponent"])({name:ce,props:ie,emits:["scale","close","closed","change","update:show"],setup(e,{emit:t,slots:o}){const c=Object(n["ref"])(),a=Object(n["reactive"])({active:0,rootWidth:0,rootHeight:0}),r=()=>{if(c.value){const e=Object(N["useRect"])(c.value.$el);a.rootWidth=e.width,a.rootHeight=e.height,c.value.resize()}},i=e=>t("scale",e),l=e=>t("update:show",e),s=()=>{Object(B["a"])(e.beforeClose,{args:[a.active],done:()=>l(!1)})},u=e=>{e!==a.active&&(a.active=e,t("change",e))},d=()=>{if(e.showIndex)return Object(n["createVNode"])("div",{class:ae("index")},[o.index?o.index({index:a.active}):`${a.active+1} / ${e.images.length}`])},m=()=>{if(o.cover)return Object(n["createVNode"])("div",{class:ae("cover")},[o.cover()])},g=()=>Object(n["createVNode"])(W,{ref:c,lazyRender:!0,loop:e.loop,class:ae("swipe"),duration:e.swipeDuration,initialSwipe:e.startPosition,showIndicators:e.showIndicators,indicatorColor:"white",onChange:u},{default:()=>[e.images.map(t=>Object(n["createVNode"])(ne,{src:t,show:e.show,active:a.active,maxZoom:e.maxZoom,minZoom:e.minZoom,rootWidth:a.rootWidth,rootHeight:a.rootHeight,onScale:i,onClose:s},{image:o.image}))]}),b=()=>{if(e.closeable)return Object(n["createVNode"])(T["a"],{role:"button",name:e.closeIcon,class:[ae("close-icon",e.closeIconPosition),R["h"]],onClick:s},null)},f=()=>t("closed"),h=(e,t)=>{var o;return null==(o=c.value)?void 0:o.swipeTo(e,t)};return Object(I["a"])({swipeTo:h}),Object(n["onMounted"])(r),Object(n["watch"])([_["g"],_["f"]],r),Object(n["watch"])(()=>e.startPosition,e=>u(+e)),Object(n["watch"])(()=>e.show,o=>{const{images:c,startPosition:i}=e;o?(u(+i),Object(n["nextTick"])(()=>{r(),h(+i,{immediate:!0})})):t("close",{index:a.active,url:c[a.active]})}),()=>Object(n["createVNode"])(p["a"],Object(n["mergeProps"])({class:[ae(),e.className],overlayClass:[ae("overlay"),e.overlayClass],onClosed:f,"onUpdate:show":l},Object(v["e"])(e,re)),{default:()=>[b(),g(),d(),m()]})}});let se;const ue={loop:!0,images:[],maxZoom:3,minZoom:1/3,onScale:void 0,onClose:void 0,onChange:void 0,teleport:"body",className:"",showIndex:!0,closeable:!1,closeIcon:"clear",transition:void 0,beforeClose:void 0,overlayStyle:void 0,overlayClass:void 0,startPosition:0,swipeDuration:300,showIndicators:!1,closeOnPopstate:!0,closeIconPosition:"top-right"};function de(){({instance:se}=Object(P["a"])({setup(){const{state:e,toggle:t}=Object(P["b"])(),o=()=>{e.images=[]};return()=>Object(n["createVNode"])(le,Object(n["mergeProps"])(e,{onClosed:o,"onUpdate:show":t}),null)}}))}const me=(e,t=0)=>{if(v["c"])return se||de(),e=Array.isArray(e)?{images:e,startPosition:t}:e,se.open(Object(v["a"])({},ue,e)),se};me.Component=Object(b["a"])(le),me.install=e=>{e.use(me.Component)};var pe=Object(n["defineComponent"])({props:{name:f["f"],item:Object(f["d"])(Object),index:Number,imageFit:String,lazyLoad:Boolean,deletable:Boolean,previewSize:[Number,String,Array],beforeDelete:Function},emits:["delete","preview"],setup(e,{emit:t,slots:o}){const c=()=>{const{status:t,message:o}=e.item;if("uploading"===t||"failed"===t){const e="failed"===t?Object(n["createVNode"])(T["a"],{name:"close",class:w("mask-icon")},null):Object(n["createVNode"])(Z["a"],{class:w("loading")},null),c=Object(h["a"])(o)&&""!==o;return Object(n["createVNode"])("div",{class:w("mask")},[e,c&&Object(n["createVNode"])("div",{class:w("mask-message")},[o])])}},a=o=>{const{name:n,item:c,index:a,beforeDelete:r}=e;o.stopPropagation(),Object(B["a"])(r,{args:[c,{name:n,index:a}],done:()=>t("delete")})},r=()=>t("preview"),i=()=>{if(e.deletable&&"uploading"!==e.item.status){const e=o["preview-delete"];return Object(n["createVNode"])("div",{role:"button",class:w("preview-delete",{shadow:!e}),tabindex:0,"aria-label":x("delete"),onClick:a},[e?e():Object(n["createVNode"])(T["a"],{name:"cross",class:w("preview-delete-icon")},null)])}},l=()=>{if(o["preview-cover"]){const{index:t,item:c}=e;return Object(n["createVNode"])("div",{class:w("preview-cover")},[o["preview-cover"](Object(v["a"])({index:t},c))])}},s=()=>{const{item:t,lazyLoad:o,imageFit:c,previewSize:a}=e;return C(t)?Object(n["createVNode"])(J,{fit:c,src:t.objectUrl||t.content||t.url,class:w("preview-image"),width:Array.isArray(a)?a[0]:a,height:Array.isArray(a)?a[1]:a,lazyLoad:o,onClick:r},{default:l}):Object(n["createVNode"])("div",{class:w("file"),style:Object(j["e"])(e.previewSize)},[Object(n["createVNode"])(T["a"],{class:w("file-icon"),name:"description"},null),Object(n["createVNode"])("div",{class:[w("file-name"),"van-ellipsis"]},[t.file?t.file.name:t.url]),l()])};return()=>Object(n["createVNode"])("div",{class:w("preview")},[s(),c(),i()])}});const ge={name:Object(f["c"])(""),accept:Object(f["e"])("image/*"),capture:String,multiple:Boolean,disabled:Boolean,readonly:Boolean,lazyLoad:Boolean,maxCount:Object(f["c"])(1/0),imageFit:Object(f["e"])("cover"),resultType:Object(f["e"])("dataUrl"),uploadIcon:Object(f["e"])("photograph"),uploadText:String,deletable:f["g"],afterRead:Function,showUpload:f["g"],modelValue:Object(f["a"])(),beforeRead:Function,beforeDelete:Function,previewSize:[Number,String,Array],previewImage:f["g"],previewOptions:Object,previewFullImage:f["g"],maxSize:{type:[Number,String,Function],default:1/0}};var be=Object(n["defineComponent"])({name:y,props:ge,emits:["delete","oversize","click-upload","close-preview","click-preview","update:modelValue"],setup(e,{emit:t,slots:o}){const c=Object(n["ref"])(),a=[],r=(t=e.modelValue.length)=>({name:e.name,index:t}),i=()=>{c.value&&(c.value.value="")},l=o=>{if(i(),k(o,e.maxSize)){if(!Array.isArray(o))return void t("oversize",o,r());{const n=S(o,e.maxSize);if(o=n.valid,t("oversize",n.invalid,r()),!o.length)return}}o=Object(n["reactive"])(o),t("update:modelValue",[...e.modelValue,...Object(v["f"])(o)]),e.afterRead&&e.afterRead(o,r())},s=t=>{const{maxCount:o,modelValue:n,resultType:c}=e;if(Array.isArray(t)){const e=+o-n.length;t.length>e&&(t=t.slice(0,e)),Promise.all(t.map(e=>M(e,c))).then(e=>{const o=t.map((t,o)=>{const n={file:t,status:"",message:"",objectUrl:URL.createObjectURL(t)};return e[o]&&(n.content=e[o]),n});l(o)})}else M(t,c).then(e=>{const o={file:t,status:"",message:"",objectUrl:URL.createObjectURL(t)};e&&(o.content=e),l(o)})},u=t=>{const{files:o}=t.target;if(e.disabled||!o||!o.length)return;const n=1===o.length?o[0]:[].slice.call(o);if(e.beforeRead){const t=e.beforeRead(n,r());if(!t)return void i();if(Object(h["f"])(t))return void t.then(e=>{s(e||n)}).catch(i)}s(n)};let d;const m=()=>t("close-preview"),p=t=>{if(e.previewFullImage){const o=e.modelValue.filter(C),n=o.map(e=>(e.objectUrl&&!e.url&&"failed"!==e.status&&(e.url=e.objectUrl,a.push(e.url)),e.url)).filter(Boolean);d=me(Object(v["a"])({images:n,startPosition:o.indexOf(t),onClose:m},e.previewOptions))}},g=()=>{d&&d.close()},b=(o,n)=>{const c=e.modelValue.slice(0);c.splice(n,1),t("update:modelValue",c),t("delete",o,r(n))},f=(c,a)=>{const i=["imageFit","deletable","previewSize","beforeDelete"],l=Object(v["a"])(Object(v["e"])(e,i),Object(v["e"])(c,i,!0));return Object(n["createVNode"])(pe,Object(n["mergeProps"])({item:c,index:a,onClick:()=>t("click-preview",c,r(a)),onDelete:()=>b(c,a),onPreview:()=>p(c)},Object(v["e"])(e,["name","lazyLoad"]),l),Object(v["e"])(o,["preview-cover","preview-delete"]))},O=()=>{if(e.previewImage)return e.modelValue.map(f)},y=e=>t("click-upload",e),x=()=>{if(e.modelValue.length>=e.maxCount||!e.showUpload)return;const t=e.readonly?null:Object(n["createVNode"])("input",{ref:c,type:"file",class:w("input"),accept:e.accept,capture:e.capture,multiple:e.multiple,disabled:e.disabled,onChange:u},null);return o.default?Object(n["createVNode"])("div",{class:w("input-wrapper"),onClick:y},[o.default(),t]):Object(n["createVNode"])("div",{class:w("upload",{readonly:e.readonly}),style:Object(j["e"])(e.previewSize),onClick:y},[Object(n["createVNode"])(T["a"],{name:e.uploadIcon,class:w("upload-icon")},null),e.uploadText&&Object(n["createVNode"])("span",{class:w("upload-text")},[e.uploadText]),t])},V=()=>{c.value&&!e.disabled&&c.value.click()};return Object(n["onBeforeUnmount"])(()=>{a.forEach(e=>URL.revokeObjectURL(e))}),Object(I["a"])({chooseFile:V,closeImagePreview:g}),Object(N["useCustomFieldValue"])(()=>e.modelValue),()=>Object(n["createVNode"])("div",{class:w()},[Object(n["createVNode"])("div",{class:w("wrapper",{disabled:e.disabled})},[O(),x()])])}});const fe=Object(b["a"])(be);var ve=fe;o("75ad"),o("e15d");const[he,je]=Object(O["a"])("grid"),Oe={square:Boolean,center:f["g"],border:f["g"],gutter:f["f"],reverse:Boolean,iconSize:f["f"],direction:String,clickable:Boolean,columnNum:Object(f["c"])(4)},ye=Symbol(he);var we=Object(n["defineComponent"])({name:he,props:Oe,setup(e,{slots:t}){const{linkChildren:o}=Object(N["useChildren"])(ye);return o({props:e}),()=>{var o;return Object(n["createVNode"])("div",{style:{paddingLeft:Object(j["a"])(e.gutter)},class:[je(),{[R["e"]]:e.border&&!e.gutter}]},[null==(o=t.default)?void 0:o.call(t)])}}}),xe=o("4e5e"),Me=o("8be7");const[ke,Se]=Object(O["a"])("grid-item"),Ve=Object(v["a"])({},xe["a"],{dot:Boolean,text:String,icon:String,badge:f["f"],iconColor:String,iconPrefix:String,badgeProps:Object});var Ee=Object(n["defineComponent"])({name:ke,props:Ve,setup(e,{slots:t}){const{parent:o,index:c}=Object(N["useParent"])(ye),a=Object(xe["b"])();if(!o)return void 0;const r=Object(n["computed"])(()=>{const{square:e,gutter:t,columnNum:n}=o.props,a=100/+n+"%",r={flexBasis:a};if(e)r.paddingTop=a;else if(t){const e=Object(j["a"])(t);r.paddingRight=e,c.value>=n&&(r.marginTop=e)}return r}),i=Object(n["computed"])(()=>{const{square:e,gutter:t}=o.props;if(e&&t){const e=Object(j["a"])(t);return{right:e,bottom:e,height:"auto"}}}),l=()=>t.icon?Object(n["createVNode"])(Me["a"],Object(n["mergeProps"])({dot:e.dot,content:e.badge},e.badgeProps),{default:t.icon}):e.icon?Object(n["createVNode"])(T["a"],{dot:e.dot,name:e.icon,size:o.props.iconSize,badge:e.badge,class:Se("icon"),color:e.iconColor,badgeProps:e.badgeProps,classPrefix:e.iconPrefix},null):void 0,s=()=>t.text?t.text():e.text?Object(n["createVNode"])("span",{class:Se("text")},[e.text]):void 0,u=()=>t.default?t.default():[l(),s()];return()=>{const{center:e,border:t,square:c,gutter:l,reverse:s,direction:d,clickable:m}=o.props,p=[Se("content",[d,{center:e,square:c,reverse:s,clickable:m,surround:t&&l}]),{[R["a"]]:t}];return Object(n["createVNode"])("div",{class:[Se({square:c})],style:r.value},[Object(n["createVNode"])("div",{role:m?"button":void 0,class:p,style:i.value,tabindex:m?0:void 0,onClick:a},[u()])])}}});const Ce=Object(b["a"])(Ee);var Ne=Ce;const Ie=Object(b["a"])(we);var Te=Ie,Pe=(o("b613"),o("b4d6")),Be=(o("89a0"),o("21a7"),o("f23a")),Re=(o("02ab"),o("dc94")),_e=(o("27f1"),o("1c96")),Le=me,De=o("9ab4"),Ue=o("ce1f"),ze=o("6605");const Ae={class:"inputWrap"};function $e(e,t,o,c,a,r){const i=Object(n["resolveComponent"])("contenteditable");return Object(n["openBlock"])(),Object(n["createElementBlock"])("div",Ae,[Object(n["createVNode"])(i,{class:"input",tag:"div",modelValue:e.ipt.txt,"onUpdate:modelValue":t[0]||(t[0]=t=>e.ipt.txt=t),noHTML:!1,noNL:!0,onReturned:e.ipt.handleEnter,placeholder:"请输入"},null,8,["modelValue","onReturned"])])}var Fe=o("3980"),We=o.n(Fe);let He=class extends Ue["b"]{constructor(){super(...arguments),this.ipt=Object(Ue["c"])(()=>{const e=Object(n["ref"])(""),t=()=>{e.value&&this.$emit("send",e.value)},o=()=>{e.value=" "},c=t=>{e.value=`${e.value}${t}`};return{txt:e,handleEnter:t,clear:o,mergeTxt:c}})}};He=Object(De["a"])([Object(Ue["a"])({emits:["send"],components:{contenteditable:We.a}})],He);var Ye=He,Xe=(o("1584"),o("6b0d")),qe=o.n(Xe);const Je=qe()(Ye,[["render",$e],["__scopeId","data-v-e7f31662"]]);var Ze=Je,Ge=o("d257"),Ke=o("5502"),Qe=o("3fff");const et=e=>(Object(n["pushScopeId"])("data-v-302425b8"),e=e(),Object(n["popScopeId"])(),e),tt={class:"messageItemWrap"},ot={class:"user"},nt={key:0},ct={key:1},at=["innerHTML"],rt={key:2},it=["src"],lt={key:3},st={key:4},ut={class:"videoMsg"},dt=["src"],mt=["id","src","poster"],pt={key:5},gt={key:6},bt={key:7},ft={key:8},vt=et(()=>Object(n["createElementVNode"])("div",{class:"audioMsg"},"语音消息",-1)),ht=[vt],jt={key:9},Ot={class:"locMsg"},yt={class:"time"},wt={key:0};function xt(e,t,o,c,a,r){const i=Object(n["resolveComponent"])("Tag"),l=Object(n["resolveComponent"])("Icon"),s=Object(n["resolveComponent"])("Popover");return Object(n["openBlock"])(),Object(n["createElementBlock"])("div",tt,[Object(n["createVNode"])(s,{show:e.leftMsg.isShowMenu,"onUpdate:show":t[6]||(t[6]=t=>e.leftMsg.isShowMenu=t),actions:e.leftMsg.actions,onSelect:e.leftMsg.onSelect,placement:"top-end",theme:"dark",trigger:"manual"},{reference:Object(n["withCtx"])(()=>[Object(n["createElementVNode"])("div",ot,Object(n["toDisplayString"])(e.msg.from),1),Object(n["createElementVNode"])("div",{class:"messageItem",onTouchstart:t[4]||(t[4]=(...t)=>e.leftMsg.showMenu&&e.leftMsg.showMenu(...t)),onTouchend:t[5]||(t[5]=(...t)=>e.leftMsg.end&&e.leftMsg.end(...t))},[e.msg.modifiedInfo?(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",nt,[Object(n["createVNode"])(i,null,{default:Object(n["withCtx"])(()=>[Object(n["createTextVNode"])("Modified")]),_:1})])):Object(n["createCommentVNode"])("",!0),Object(n["createElementVNode"])("div",null,"消息ext: "+Object(n["toDisplayString"])(JSON.stringify(e.msg.ext)),1),e.msg.type===e.leftMsg.msgType.txt?(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",ct,[Object(n["createElementVNode"])("span",{innerHTML:e.msg.msg},null,8,at)])):e.msg.type===e.leftMsg.msgType.img?(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",rt,[Object(n["createElementVNode"])("img",{class:"imgMsg",src:e.leftMsg.formatUrl(e.msg.thumb||e.msg.url),onClick:t[0]||(t[0]=t=>e.leftMsg.previewImg(e.msg.url))},null,8,it)])):e.msg.type===e.leftMsg.msgType.file?(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",lt,[Object(n["createElementVNode"])("div",{class:"fileMsg",onClick:t[1]||(t[1]=t=>e.leftMsg.downloadAttach(e.msg.url))},[Object(n["createTextVNode"])(Object(n["toDisplayString"])(e.msg.filename),1),Object(n["createVNode"])(l,{class:"icon",size:"18",name:"down"})])])):e.msg.type===e.leftMsg.msgType.video?(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",st,[Object(n["createElementVNode"])("div",ut,[Object(n["createElementVNode"])("span",null,[Object(n["createTextVNode"])("封面： "),Object(n["createElementVNode"])("img",{style:{width:"100px"},src:e.leftMsg.formatUrl(e.msg.thumb)},null,8,dt)]),Object(n["createElementVNode"])("video",{id:e.msg.id,src:e.leftMsg.formatUrl(e.msg.url),poster:e.leftMsg.formatUrl(e.msg.thumb),controls:"",onError:t[2]||(t[2]=t=>e.leftMsg.onVideoError(e.msg.id,e.msg.url))},null,40,mt)])])):e.msg.type===e.leftMsg.msgType.custom?(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",pt,[Object(n["createElementVNode"])("div",null,[Object(n["createElementVNode"])("div",null,"自定义消息Event: "+Object(n["toDisplayString"])(e.msg.customEvent),1),Object(n["createElementVNode"])("div",null,"自定义消息Exts: "+Object(n["toDisplayString"])(JSON.stringify(e.msg.customExts)),1)])])):e.msg.type===e.leftMsg.msgType.cmd?(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",gt,[Object(n["createElementVNode"])("div",null,"cmd消息 action: "+Object(n["toDisplayString"])(e.msg.action),1)])):e.msg.type===e.leftMsg.msgType.combine?(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",bt,[Object(n["createElementVNode"])("div",{class:"combine",onClick:t[3]||(t[3]=t=>e.leftMsg.getCombineMsg(e.msg))},[Object(n["createElementVNode"])("p",null,"title: "+Object(n["toDisplayString"])(e.msg.title),1),Object(n["createElementVNode"])("p",null,"summary: "+Object(n["toDisplayString"])(e.msg.summary),1),Object(n["createElementVNode"])("p",null,"compatibleText: "+Object(n["toDisplayString"])(e.msg.compatibleText),1)])])):e.msg.type===e.leftMsg.msgType.audio?(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",ft,ht)):e.msg.type===e.leftMsg.msgType.loc?(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",jt,[Object(n["createElementVNode"])("div",Ot," 位置消息 addr: "+Object(n["toDisplayString"])(e.msg.addr)+" buildingName: "+Object(n["toDisplayString"])(e.msg.buildingName)+" lat: "+Object(n["toDisplayString"])(e.msg.lat)+" lng: "+Object(n["toDisplayString"])(e.msg.lng),1)])):Object(n["createCommentVNode"])("",!0),e.msg.broadcast?(Object(n["openBlock"])(),Object(n["createBlock"])(i,{key:10},{default:Object(n["withCtx"])(()=>[Object(n["createTextVNode"])("广播消息: "+Object(n["toDisplayString"])(e.msg.broadcast),1)]),_:1})):Object(n["createCommentVNode"])("",!0)],32),Object(n["createElementVNode"])("div",yt,Object(n["toDisplayString"])(e.leftMsg.formatTime(e.timestamp,"YYYY-MM-DD hh:mm:ss")),1),e.isPinned?(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",wt,[Object(n["createVNode"])(i,{style:{"margin-left":"10px"}},{default:Object(n["withCtx"])(()=>[Object(n["createTextVNode"])("Pinned")]),_:1})])):Object(n["createCommentVNode"])("",!0)]),_:1},8,["show","actions","onSelect"])])}o("88a7"),o("271a"),o("5494"),o("cb9e");var Mt=o("8ca0");class kt{}let St=class extends(Ue["b"].with(kt)){constructor(){super(...arguments),this.leftMsg=Object(Ue["c"])(()=>{let e;const t=Object(n["ref"])(0),o=e=>"true"===window.localStorage.getItem("isAuthFile")?`${e}&auth=${window.localStorage.getItem("token")}`:e,c=e=>{this.$emit("previewImg",o(e))},a=e=>{let t=e;"true"===window.localStorage.getItem("isAuthFile")&&(t=`${e}&auth=${window.localStorage.getItem("token")}`);const o=this.msg.filename;Mt["a"].utils.download({url:t,onFileDownloadComplete:e=>{console.log("下载成功",e);const t=window.URL.createObjectURL(e),n=document.createElement("a");n.href=t,n.download=o,n.click(),document.body.removeChild(n),window.URL.revokeObjectURL(t)},onFileDownloadError:e=>{console.log("下载失败",e)}})},r=Object(n["ref"])(!1),i=[{text:this.isPinned?Qe["d"].unpin:Qe["d"].pin}],l=()=>{clearInterval(e),e=setTimeout(()=>{r.value=!0},300)},s=()=>{clearInterval(e)},u=e=>{e.text===Qe["d"].pin?this.$emit("pinMessage"):e.text===Qe["d"].unpin&&this.$emit("unpinMessage")},d=(e,o)=>{let n=0;n&&clearInterval(n),t.value<5&&(t.value++,n=setTimeout(()=>{let t=document.getElementById(e);t.setAttribute("src",o)},1e3))},m=e=>{this.$emit("previewCombineMsg",e)};return{isShowMenu:r,actions:i,formatTime:Ge["a"],msgType:Qe["e"],getCombineMsg:m,previewImg:c,formatUrl:o,downloadAttach:a,onVideoError:d,onSelect:u,showMenu:l,end:s}})}};St=Object(De["a"])([Object(Ue["a"])({props:{msg:{default:()=>({})},timestamp:0,isPinned:!1},components:{Icon:T["b"],Tag:m["a"],Popover:Pe["a"]},emits:["previewImg","previewCombineMsg","pinMessage","unpinMessage"]})],St);var Vt=St;o("866e");const Et=qe()(Vt,[["render",xt],["__scopeId","data-v-302425b8"]]);var Ct=Et;const Nt=e=>(Object(n["pushScopeId"])("data-v-c1b6e468"),e=e(),Object(n["popScopeId"])(),e),It={class:"messageItemWrap"},Tt={class:"user"},Pt={key:0},Bt={key:1},Rt=["innerHTML"],_t={key:2},Lt=["src"],Dt={key:3},Ut={key:4},zt={class:"videoMsg"},At=["src"],$t=["id","src","poster"],Ft={key:5},Wt={key:6},Ht={key:7},Yt={key:8},Xt=Nt(()=>Object(n["createElementVNode"])("div",{class:"audioMsg"},"语音消息",-1)),qt=[Xt],Jt={key:9},Zt={class:"locMsg"},Gt={key:10},Kt={class:"time"};function Qt(e,t,o,c,a,r){const i=Object(n["resolveComponent"])("Tag"),l=Object(n["resolveComponent"])("Icon"),s=Object(n["resolveComponent"])("Popover");return Object(n["openBlock"])(),Object(n["createElementBlock"])("div",It,[Object(n["createVNode"])(s,{show:e.rightMsg.isShowMenu,"onUpdate:show":t[6]||(t[6]=t=>e.rightMsg.isShowMenu=t),actions:e.rightMsg.actions,onSelect:e.rightMsg.onSelect,placement:"top-end",theme:"dark",trigger:"manual"},{reference:Object(n["withCtx"])(()=>[Object(n["createElementVNode"])("div",Tt,Object(n["toDisplayString"])(e.rightMsg.uid),1),Object(n["createElementVNode"])("div",{class:"messageItem",onTouchstart:t[4]||(t[4]=(...t)=>e.rightMsg.showMenu&&e.rightMsg.showMenu(...t)),onTouchend:t[5]||(t[5]=(...t)=>e.rightMsg.end&&e.rightMsg.end(...t))},[e.msg.modifiedInfo?(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",Pt,[Object(n["createVNode"])(i,null,{default:Object(n["withCtx"])(()=>[Object(n["createTextVNode"])("Modified")]),_:1})])):Object(n["createCommentVNode"])("",!0),Object(n["createElementVNode"])("div",null,"消息ext: "+Object(n["toDisplayString"])(JSON.stringify(e.msg.ext)),1),e.msg.type===e.rightMsg.msgType.txt?(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",Bt,[Object(n["createElementVNode"])("span",{innerHTML:e.msg.msg},null,8,Rt)])):e.msg.type===e.rightMsg.msgType.img?(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",_t,[Object(n["createElementVNode"])("img",{class:"imgMsg",src:e.rightMsg.formatUrl(e.msg.thumb),onClick:t[0]||(t[0]=t=>e.rightMsg.previewImg(e.msg.url||""))},null,8,Lt)])):e.msg.type===e.rightMsg.msgType.file?(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",Dt,[Object(n["createElementVNode"])("div",{class:"fileMsg",onClick:t[1]||(t[1]=t=>e.rightMsg.downloadAttach(e.msg.url||""))},[Object(n["createTextVNode"])(Object(n["toDisplayString"])(e.msg.filename),1),Object(n["createVNode"])(l,{class:"icon",size:"18",name:"down"})])])):e.msg.type===e.rightMsg.msgType.video?(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",Ut,[Object(n["createElementVNode"])("div",zt,[Object(n["createElementVNode"])("span",null,[Object(n["createTextVNode"])("封面： "),Object(n["createElementVNode"])("img",{style:{width:"100px"},src:""+e.rightMsg.formatUrl(e.msg.thumb)},null,8,At)]),Object(n["createElementVNode"])("video",{id:e.msg.id,src:e.rightMsg.formatUrl(e.msg.url),poster:e.rightMsg.formatUrl(e.msg.thumb),controls:"",onError:t[2]||(t[2]=t=>e.rightMsg.onVideoError(e.msg.id,e.msg.url||""))},null,40,$t)])])):e.msg.type===e.rightMsg.msgType.custom?(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",Ft,[Object(n["createElementVNode"])("div",null,[Object(n["createElementVNode"])("div",null,"自定义消息Event: "+Object(n["toDisplayString"])(e.msg.customEvent),1),Object(n["createElementVNode"])("div",null,"自定义消息Exts: "+Object(n["toDisplayString"])(JSON.stringify(e.msg.customExts)),1)])])):e.msg.type===e.rightMsg.msgType.cmd?(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",Wt,[Object(n["createElementVNode"])("div",null,"cmd消息 action: "+Object(n["toDisplayString"])(e.msg.action),1)])):e.msg.type===e.rightMsg.msgType.combine?(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",Ht,[Object(n["createElementVNode"])("div",{class:"combine",onClick:t[3]||(t[3]=t=>e.rightMsg.getCombineMsg(e.msg))},[Object(n["createElementVNode"])("p",null,"title: "+Object(n["toDisplayString"])(e.msg.title),1),Object(n["createElementVNode"])("p",null,"summary: "+Object(n["toDisplayString"])(e.msg.summary),1),Object(n["createElementVNode"])("p",null,"compatibleText: "+Object(n["toDisplayString"])(e.msg.compatibleText),1)])])):e.msg.type===e.rightMsg.msgType.audio?(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",Yt,qt)):e.msg.type===e.rightMsg.msgType.loc?(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",Jt,[Object(n["createElementVNode"])("div",Zt," 位置消息 addr: "+Object(n["toDisplayString"])(e.msg.addr)+" buildingName: "+Object(n["toDisplayString"])(e.msg.buildingName)+" lat: "+Object(n["toDisplayString"])(e.msg.lat)+" lng: "+Object(n["toDisplayString"])(e.msg.lng),1)])):Object(n["createCommentVNode"])("",!0),e.isPinned?(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",Gt,[Object(n["createVNode"])(i,{style:{"margin-left":"10px"}},{default:Object(n["withCtx"])(()=>[Object(n["createTextVNode"])("Pinned")]),_:1})])):Object(n["createCommentVNode"])("",!0)],32)]),_:1},8,["show","actions","onSelect"]),Object(n["createElementVNode"])("div",Kt,Object(n["toDisplayString"])(e.rightMsg.formatTime(e.timestamp,"YYYY-MM-DD hh:mm:ss")),1)])}o("f8c9"),o("14d9");var eo=function(){var e=function(t,o){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])},e(t,o)};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),to=function(e,t,o,n){var c,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var i=e.length-1;i>=0;i--)(c=e[i])&&(r=(a<3?c(r):a>3?c(t,o,r):c(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r},oo=function(){function e(){}return e}(),no=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.rightMsg=Object(Ue["c"])((function(){var e,o=function(e){return"true"===window.localStorage.getItem("isAuthFile")?e+"&auth="+window.localStorage.getItem("token"):e},c=function(e){t.$emit("previewImg",o(e))},a=function(e){var o=e;"true"===window.localStorage.getItem("isAuthFile")&&(o=e+"&auth="+window.localStorage.getItem("token"));var n=t.msg.filename;Mt["a"].utils.download({url:o,onFileDownloadComplete:function(e){console.log("下载成功",e);var t=window.URL.createObjectURL(e),o=document.createElement("a");o.href=t,o.download=n,o.click(),document.body.removeChild(o),window.URL.revokeObjectURL(t)},onFileDownloadError:function(e){console.log("下载失败",e)}})},r=localStorage.getItem("uid"),i=Object(n["ref"])(0),l=Object(n["ref"])(!1),s=[{text:Qe["d"].pin},{text:Qe["d"].recall}];s.push({text:Qe["d"].modify});var u=function(){clearInterval(e),e=setTimeout((function(){l.value=!0}),300)},d=function(){clearInterval(e)},m=function(e){t.$emit("previewCombineMsg",e)},p=function(e){e.text===Qe["d"].recall?t.$emit("recallMessage"):e.text===Qe["d"].modify?t.$emit("modifyMessage"):e.text===Qe["d"].pin&&t.$emit("pinMessage")},g=function(e,t){var o=0;o&&clearInterval(o),i.value<5&&(i.value++,o=setTimeout((function(){var o=document.getElementById(e);o.setAttribute("src",t)}),1e3))};return{actions:s,msgType:Qe["e"],isShowMenu:l,uid:r,formatTime:Ge["a"],onSelect:p,previewImg:c,showMenu:u,end:d,getCombineMsg:m,downloadAttach:a,formatUrl:o,onVideoError:g}})),t}return eo(t,e),t=to([Object(Ue["a"])({props:{msg:{default:function(){return{}}},timestamp:0,isPinned:!1},components:{Icon:T["b"],Popover:Pe["a"],Tag:m["a"]},emits:["previewImg","recallMessage","modifyMessage","previewCombineMsg","pinMessage"]})],t),t}(Ue["b"].with(oo)),co=no;o("9789");const ao=qe()(co,[["render",Qt],["__scopeId","data-v-c1b6e468"]]);var ro=ao,io={path:"../static/emoji",obj:{"[):]":"ee_1.png","[:D]":"ee_2.png","[;)]":"ee_3.png","[:-o]":"ee_4.png","[:p]":"ee_5.png","[(H)]":"ee_6.png","[:@]":"ee_7.png","[:s]":"ee_8.png","[:$]":"ee_9.png","[:(]":"ee_10.png","[:'(]":"ee_11.png","[:|]":"ee_18.png","[(a)]":"ee_13.png","[8o|]":"ee_14.png","[8-|]":"ee_15.png","[+o(]":"ee_16.png","[<o)]":"ee_12.png","[|-)]":"ee_17.png","[*-)]":"ee_19.png","[:-#]":"ee_20.png","[:-*]":"ee_22.png","[^o)]":"ee_21.png","[8-)]":"ee_23.png","[(|)]":"ee_24.png","[(u)]":"ee_25.png","[(S)]":"ee_26.png","[(*)]":"ee_27.png","[(#)]":"ee_28.png","[(R)]":"ee_29.png","[({)]":"ee_30.png","[(})]":"ee_31.png","[(k)]":"ee_32.png","[(F)]":"ee_33.png","[(W)]":"ee_34.png","[(D)]":"ee_35.png"}},lo=o("f695");let so=class extends Ue["b"]{constructor(){super(...arguments),this.chat=Object(Ue["c"])(()=>{const e=Object(ze["e"])(),t=Object(ze["d"])(),o=Object(Ke["b"])(),c=o.state.IM.connect,a=Object(n["getCurrentInstance"])(),r=t.params.fromId,i=t.params.chatType,l=Object(n["ref"])(!1),s=Object(n["ref"])(!1),u=`${i}${r}`,d=Object(n["ref"])(""),m=Object(n["ref"])('{"x":1}'),p=Object(n["ref"])(""),g=Object(n["ref"])('{"x":1}'),b=Object(n["ref"])(!1);let f=Object(n["ref"])([]);const v=e=>{var t;const n=null===(t=o.state.IM.chat[u])||void 0===t?void 0:t.messageList.filter(e=>e.type===Qe["e"].img).map(e=>"true"===window.localStorage.getItem("isAuthFile")?`${e.url}&auth=${window.localStorage.getItem("token")}`||`${e.body.url}&auth=${window.localStorage.getItem("token")}`:e.url||e.body.url);Le({images:n,startPosition:n.findIndex(t=>t===e)})},h=e=>{const{url:t,secret:o}=e;console.log(t,o),c.downloadAndParseCombineMessage({url:t,secret:o}).then(e=>{console.log(e)})},j=Object.entries(io.obj).map(e=>({name:e[0],url:"/emoji/"+e[1]})),O=()=>{l.value=!1},y=()=>{e.go(-1)},w=()=>{const e={queue:r.toLowerCase(),isGroup:i!==Qe["a"].singleChat,count:10,format:!0};c.fetchHistoryMessages(e).then(e=>{console.log(e,"getHistoryRes"),e.forEach(e=>{o.commit("IM/pushMessage",{fromId:u,message:e})})})};c.addEventHandler("MESSAGE_SCROLL",{onTextMessage:()=>{setTimeout(()=>{Object(Ge["c"])(document.getElementById("msgWrap"))},200)}});const x=()=>{const e=null===a||void 0===a?void 0:a.refs.ipt;e.ipt.txt?M(e.ipt.txt):Object(_e["a"])("不能发送空消息")},M=e=>{let t=Object(lo["a"])({chatType:i,type:Qe["e"].txt,to:r,msg:e,priority:"high",msgConfig:{}});Object(lo["b"])(t).then(e=>{console.log("发送成功",t,e),o.commit("IM/pushMessage",{fromId:u,message:(null===e||void 0===e?void 0:e.message)||t});const n=null===a||void 0===a?void 0:a.refs.ipt;n.ipt.clear(),Object(Ge["c"])(document.getElementById("msgWrap"))})},k=e=>{l.value=!1;const t=null===a||void 0===a?void 0:a.refs.ipt,o=`<img class="emojiItem" src="${e}"/>`;t.ipt.mergeTxt(o)},S=e=>{const t=Object(lo["a"])({chatType:i,type:Qe["e"].img,to:r,file:Object(lo["c"])(e.file),width:200,height:200,thumbnailHeight:20,thumbnailWidth:20,onFileUploadError:function(e){console.log("onFileUploadError",e)},onFileUploadProgress:function(e){console.log(e,"progressssss")},onFileUploadComplete:function(){console.log("onFileUploadComplete")}});console.log(t,"imgMsgimgMsg"),Object(lo["b"])(t).then(e=>{console.log(t,"imgMsg"),o.commit("IM/pushMessage",{fromId:u,message:t}),setTimeout(()=>{Object(Ge["c"])(document.getElementById("msgWrap"))},200),console.log(e,"发送图片消息成功")})},V=e=>{const t=Object(lo["a"])({chatType:i,type:Qe["e"].file,to:r,filename:e.file.name,file:Object(lo["c"])(e.file),onFileUploadError:function(){console.log("onFileUploadError")},onFileUploadProgress:function(e){console.log(e)},onFileUploadComplete:function(){console.log("onFileUploadComplete")}});Object(lo["b"])(t).then(e=>{console.log(t,"attachMsg"),o.commit("IM/pushMessage",{fromId:u,message:t}),setTimeout(()=>{Object(Ge["c"])(document.getElementById("msgWrap"))},200),console.log(e,"发送附件消息成功")})},E=e=>{const t=Object(lo["a"])({chatType:i,type:Qe["e"].video,to:r,filename:e.file.name,file:Object(lo["c"])(e.file),onFileUploadError:function(){console.log("onFileUploadError")},onFileUploadProgress:function(e){console.log(e)},onFileUploadComplete:function(e){console.log("onFileUploadComplete",e)}});Object(lo["b"])(t).then(e=>{console.log(t,"attachMsg"),o.commit("IM/pushMessage",{fromId:u,message:t}),setTimeout(()=>{Object(Ge["c"])(document.getElementById("msgWrap"))},200),console.log(e,"发送视频消息成功")})},C=()=>{const e=Object(lo["a"])({chatType:i,type:Qe["e"].custom,to:r,customEvent:"RED_PACKAGE",customExts:{amount:1e3}});console.log(e,"customMsg"),Object(lo["b"])(e).then(t=>{o.commit("IM/pushMessage",{fromId:u,message:e}),setTimeout(()=>{Object(Ge["c"])(document.getElementById("msgWrap"))},200),console.log(t,"发送自定义消息成功")})},N=()=>{const e=Object(lo["a"])({chatType:i,type:Qe["e"].cmd,to:r,action:"refresh"});console.log(e,"cmdMsg"),Object(lo["b"])(e).then(t=>{o.commit("IM/pushMessage",{fromId:u,message:e}),setTimeout(()=>{Object(Ge["c"])(document.getElementById("msgWrap"))},200),console.log(t,"发送命令消息成功")})},I=()=>{const e=Object(lo["a"])({type:"audio",to:r,chatType:i,filename:"audio.mp3",body:{url:"http://a1-hsb.easemob.com/easemob-demo/sdk111/chatfiles/711702b0-f02e-11ef-9d75-818be9dd88b3?em-redirect=true&share-secret=cRcpwPAuEe-JXR26LuehhUpwVNJzN10gGMC01-yMKPSS9DQj",filename:"audio.mp3",type:"mp3",length:10}});Object(lo["b"])(e).then(t=>{o.commit("IM/pushMessage",{fromId:u,message:e}),setTimeout(()=>{Object(Ge["c"])(document.getElementById("msgWrap"))},200),console.log(t,"发送语音消息成功")})},T=e=>{const t={mid:e,to:r,chatType:i,ext:JSON.stringify({chatType:i})};Object(lo["f"])(t).then(t=>{o.commit("IM/deleteMessage",{fromId:u,id:e}),console.log(t,"撤回消息成功")})},P=e=>{s.value=e},B=()=>{b.value=!0,W()},R=()=>{let e={};const t={...o.state.IM.chat[`${i}${r}`].messageList.find(e=>e.id===s.value)};console.log("find the modified message",t);const n=m.value?JSON.parse(m.value):void 0;"txt"===t.type&&(e=Object(lo["a"])({chatType:i,type:Qe["e"].txt,to:r,msg:d.value,msgConfig:{},ext:n})),"img"===t.type&&(e=Object(lo["a"])({chatType:i,type:Qe["e"].img,url:t.url,to:r,ext:n})),"video"===t.type&&(e=Object(lo["a"])({chatType:i,type:Qe["e"].video,to:r,file:{url:t.url,filename:t.filename,filetype:t.filetype,data:t.data},ext:n})),"file"===t.type&&(e=Object(lo["a"])({chatType:i,type:Qe["e"].file,to:r,body:{url:t.url},ext:n})),"audio"===t.type&&(e=Object(lo["a"])({chatType:i,type:Qe["e"].audio,to:r,body:{url:t.url},ext:n})),"custom"===t.type&&(e=Object(lo["a"])({chatType:i,type:Qe["e"].custom,to:r,customEvent:p.value||t.customEvent,customExts:JSON.parse(g.value)||t.customExts,ext:n})),"cmd"===t.type&&(e=Object(lo["a"])({chatType:i,type:Qe["e"].cmd,to:r,action:t.action,ext:n})),"combine"===t.type&&(e=Object(lo["a"])({chatType:i,type:Qe["e"].combine,to:r,compatibleText:t.compatibleText,title:t.title,summary:t.summary,messageList:[],ext:n})),"loc"===t.type&&(e=Object(lo["a"])({chatType:i,type:Qe["e"].loc,to:r,addr:t.addr,buildingName:t.buildingName,lat:t.lat,lng:t.lng,ext:n})),c.modifyMessage({messageId:s.value,modifiedMessage:e}).then(n=>{console.log("modify msg success",n),t.ext=e.ext,"txt"===e.type&&(t.msg=e.msg),"custom"===e.type&&(t.customEvent=e.customEvent,t.customExts=e.customExts),o.commit("IM/updateMessage",{fromId:u,modifiedMsg:t})}).catch(e=>{console.log(e,"modify catch res")}),s.value=!1,d.value=""},_=e=>{c.pinMessage({conversationId:r,conversationType:i,messageId:e}).then(()=>{console.log("pinMessage Success")}).catch(e=>{console.log(e,"pinMessage failed")})},L=e=>{c.unpinMessage({conversationId:r,conversationType:i,messageId:e}).then(()=>{console.log("unpinMessage Success"),o.commit("IM/deletePinedMessage",{fromId:`${i}${r}`,id:e})}).catch(e=>{console.log(e,"unpinMessage failed")})},D=()=>{let e=Object(lo["a"])({chatType:i,type:Qe["e"].combine,to:r,compatibleText:"[不支持消息类型]",title:"合并消息标题",summary:"合并消息汇总",messageList:JSON.parse(JSON.stringify(o.state.IM.chat[u].messageList))});Object(lo["b"])(e).then(t=>{console.log(e,"combine msg"),o.commit("IM/pushMessage",{fromId:u,message:e}),setTimeout(()=>{Object(Ge["c"])(document.getElementById("msgWrap"))},200),console.log(t,"发送合并消息成功")})},U=()=>{let e=Object(lo["a"])({chatType:i,type:Qe["e"].loc,to:r,addr:"北京市海淀区",buildingName:"中关村大厦",lat:39.989,lng:116.309});Object(lo["b"])(e).then(t=>{console.log(e,"location msg"),o.commit("IM/pushMessage",{fromId:u,message:e}),setTimeout(()=>{Object(Ge["c"])(document.getElementById("msgWrap"))},200),console.log(t,"发送位置消息成功")})},z=()=>{const e=Object(lo["a"])({type:Qe["e"].channel,chatType:i,to:r});Object(lo["b"])(e).then(e=>{console.log(e,"发送会话已读回执成功")})},A=()=>{var e,t;let n=null===(e=o.state.IM.chat[u])||void 0===e?void 0:e.messageList[(null===(t=o.state.IM.chat[u])||void 0===t?void 0:t.messageList.length)-1].id;const c=Object(lo["a"])({type:Qe["e"].read,chatType:i,id:n,to:r});Object(lo["b"])(c).then(e=>{console.log(e,"发送消息已读回执成功")})},$=()=>{var e,t;let n=null===(e=o.state.IM.chat[u])||void 0===e?void 0:e.messageList[(null===(t=o.state.IM.chat[u])||void 0===t?void 0:t.messageList.length)-1].id;const c=Object(lo["a"])({type:Qe["e"].read,chatType:Qe["a"].groupChat,id:""+n,to:r,ackContent:"group ack content"});Object(lo["b"])(c).then(e=>{console.log(e,"发送消息已读回执成功")})},F=()=>{i===Qe["a"].groupChat?$():A()},W=()=>{o.commit("IM/clearPinnedMessage",{fromId:u}),c.getServerPinnedMessages({conversationId:r,conversationType:i,pageSize:100}).then(e=>{var t;null===e||void 0===e||null===(t=e.data)||void 0===t||t.list.forEach(e=>{e.pinTime=Object(Ge["a"])(e.pinTime,"YYYY-MM-DD hh:mm:ss"),o.commit("IM/pushPinedMessage",{fromId:u,message:e})}),console.log(e,"getServerPinnedMessages")}).catch(e=>{console.log(e,"getServerPinnedMessages failed")})};return Object(n["onMounted"])(()=>{var e;o.state.IM.chat[u]&&0!==(null===(e=o.state.IM.chat[u])||void 0===e?void 0:e.messageList.length)||w(),"chatRoom"===i&&c.joinChatRoom({roomId:r}).then(e=>{console.log("加入聊天室成功",e)}).catch(e=>{console.log(e,"加入聊天室失败")})}),Object(n["onUnmounted"])(()=>{"chatRoom"===i&&c.leaveChatRoom({roomId:r})}),{fromId:r,currentUser:c.user,emojiShow:l,emojiLs:j,chatType:i,chatInfo:o.state.IM.chat,pinInfo:o.state.IM.pin,pinMessageIdsMap:o.state.IM.pinMessageIdsMap,isShowModifyModal:s,showPinedMessageList:B,isShowPinnedMessage:b,pinedMessages:f,modifiedText:d,modifiedExt:m,modifiedEvent:p,modifiedExts:g,toChat:y,sendMsg:M,selectEmoji:O,sendEmoji:k,afterReadImg:S,afterReadAttach:V,previewImage:v,previewCombineMsg:h,afterReadVideo:E,onSendClick:x,sendCustomMsg:C,sendCmdMsg:N,sendAudioMsg:I,revokeMsg:T,modifyMessage:R,pinMessage:_,unpinMessage:L,showModifyModal:P,sendChatReadAck:z,sendMsgReadAck:A,getHistoryMsg:w,sendGroupMsgAck:$,sendCombineMsg:D,sendLocationMsg:U,getPinnedMessages:W,sendAck:F}})}};so=Object(De["a"])([Object(Ue["a"])({components:{NavBar:Re["a"],Input:Ze,Field:Be["a"],Icon:T["b"],MsgLeft:Ct,MsgRight:ro,Popover:Pe["a"],Grid:Te,GridItem:Ne,Uploader:ve,Dialog:g["a"].Component,Popup:p["b"],Tag:m["a"]}})],so);var uo=so;o("de79");const mo=qe()(uo,[["render",d],["__scopeId","data-v-85aadad0"]]);t["default"]=mo},9789:function(e,t,o){"use strict";o("d687")},"9b7e":function(e,t,o){},a3b5:function(e,t,o){"use strict";o("68ef"),o("cb51"),o("3743"),o("9b7e")},bcd3:function(e,t,o){},d44e:function(e,t,o){var n=o("9bf2").f,c=o("1a2d"),a=o("b622"),r=a("toStringTag");e.exports=function(e,t,o){e&&!o&&(e=e.prototype),e&&!c(e,r)&&n(e,r,{configurable:!0,value:t})}},d687:function(e,t,o){},de79:function(e,t,o){"use strict";o("1cce")},e15d:function(e,t,o){},edd0:function(e,t,o){var n=o("13d2"),c=o("9bf2");e.exports=function(e,t,o){return o.get&&n(o.get,t,{getter:!0}),o.set&&n(o.set,t,{setter:!0}),c.f(e,t,o)}},f23a:function(e,t,o){"use strict";o.d(t,"a",(function(){return U}));var n=o("23f9"),c=o("7a23"),a=o("1fba"),r=o("e5f6"),i=o("fa7c"),l=o("d243"),s=o("b75f"),u=o("5aa0"),d=o("8db7");function m(e){return Array.isArray(e)?!e.length:0!==e&&!e}function p(e,t){if(m(e)){if(t.required)return!1;if(!1===t.validateEmpty)return!0}return!(t.pattern&&!t.pattern.test(String(e)))}function g(e,t){return new Promise(o=>{const n=t.validator(e,t);Object(s["f"])(n)?n.then(o):o(n)})}function b(e,t){const{message:o}=t;return Object(s["b"])(o)?o(e,t):o||""}function f({target:e}){e.composing=!0}function v({target:e}){e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}function h(e,t){const o=Object(d["a"])();e.style.height="auto";let n=e.scrollHeight;if(Object(s["e"])(t)){const{maxHeight:e,minHeight:o}=t;void 0!==e&&(n=Math.min(n,e)),void 0!==o&&(n=Math.max(n,o))}n&&(e.style.height=n+"px",Object(d["e"])(o))}function j(e){return"number"===e?{type:"text",inputmode:"decimal"}:"digit"===e?{type:"tel",inputmode:"numeric"}:{type:e}}function O(e){return[...e].length}function y(e,t){return[...e].slice(0,t).join("")}var w=o("4e5e"),x=o("9a1c");const[M,k]=Object(a["a"])("cell"),S={icon:String,size:String,title:r["f"],value:r["f"],label:r["f"],center:Boolean,isLink:Boolean,border:r["g"],required:Boolean,iconPrefix:String,valueClass:r["h"],labelClass:r["h"],titleClass:r["h"],titleStyle:null,arrowDirection:String,clickable:{type:Boolean,default:null}},V=Object(i["a"])({},S,w["a"]);var E=Object(c["defineComponent"])({name:M,props:V,setup(e,{slots:t}){const o=Object(w["b"])(),n=()=>{const o=t.label||Object(s["a"])(e.label);if(o)return Object(c["createVNode"])("div",{class:[k("label"),e.labelClass]},[t.label?t.label():e.label])},a=()=>{if(t.title||Object(s["a"])(e.title))return Object(c["createVNode"])("div",{class:[k("title"),e.titleClass],style:e.titleStyle},[t.title?t.title():Object(c["createVNode"])("span",null,[e.title]),n()])},r=()=>{const o=t.value||t.default,n=o||Object(s["a"])(e.value);if(n){const n=t.title||Object(s["a"])(e.title);return Object(c["createVNode"])("div",{class:[k("value",{alone:!n}),e.valueClass]},[o?o():Object(c["createVNode"])("span",null,[e.value])])}},i=()=>t.icon?t.icon():e.icon?Object(c["createVNode"])(x["a"],{name:e.icon,class:k("left-icon"),classPrefix:e.iconPrefix},null):void 0,l=()=>{if(t["right-icon"])return t["right-icon"]();if(e.isLink){const t=e.arrowDirection&&"right"!==e.arrowDirection?"arrow-"+e.arrowDirection:"arrow";return Object(c["createVNode"])(x["a"],{name:t,class:k("right-icon")},null)}};return()=>{var n,s;const{size:u,center:d,border:m,isLink:p,required:g}=e,b=null!=(n=e.clickable)?n:p,f={center:d,required:g,clickable:b,borderless:!m};return u&&(f[u]=!!u),Object(c["createVNode"])("div",{class:k(f),role:b?"button":void 0,tabindex:b?0:void 0,onClick:o},[i(),a(),r(),l(),null==(s=t.extra)?void 0:s.call(t)])}}}),C=o("450f"),N=o("05df"),I=o("efd9");const T=Object(n["a"])(E);const[P,B]=Object(a["a"])("field"),R={id:String,name:String,leftIcon:String,rightIcon:String,autofocus:Boolean,clearable:Boolean,maxlength:r["f"],formatter:Function,clearIcon:Object(r["e"])("clear"),modelValue:Object(r["c"])(""),inputAlign:String,placeholder:String,autocomplete:String,errorMessage:String,enterkeyhint:String,clearTrigger:Object(r["e"])("focus"),formatTrigger:Object(r["e"])("onChange"),error:{type:Boolean,default:null},disabled:{type:Boolean,default:null},readonly:{type:Boolean,default:null}},_=Object(i["a"])({},S,R,{rows:r["f"],type:Object(r["e"])("text"),rules:Array,autosize:[Boolean,Object],labelWidth:r["f"],labelClass:r["h"],labelAlign:String,showWordLimit:Boolean,errorMessageAlign:String,colon:{type:Boolean,default:null}});var L=Object(c["defineComponent"])({name:P,props:_,emits:["blur","focus","clear","keypress","click-input","end-validate","start-validate","click-left-icon","click-right-icon","update:modelValue"],setup(e,{emit:t,slots:o}){const n=Object(N["a"])(),a=Object(c["reactive"])({status:"unvalidated",focused:!1,validateMessage:""}),r=Object(c["ref"])(),w=Object(c["ref"])(),M=Object(c["ref"])(),{parent:k}=Object(C["useParent"])(l["g"]),S=()=>{var t;return String(null!=(t=e.modelValue)?t:"")},V=t=>Object(s["a"])(e[t])?e[t]:k&&Object(s["a"])(k.props[t])?k.props[t]:void 0,E=Object(c["computed"])(()=>{const t=V("readonly");if(e.clearable&&!t){const t=""!==S(),o="always"===e.clearTrigger||"focus"===e.clearTrigger&&a.focused;return t&&o}return!1}),P=Object(c["computed"])(()=>M.value&&o.input?M.value():e.modelValue),R=e=>e.reduce((e,t)=>e.then(()=>{if("failed"===a.status)return;let{value:e}=P;if(t.formatter&&(e=t.formatter(e,t)),!p(e,t))return a.status="failed",void(a.validateMessage=b(e,t));if(t.validator){if(m(e)&&!1===t.validateEmpty)return;return g(e,t).then(o=>{o&&"string"===typeof o?(a.status="failed",a.validateMessage=o):!1===o&&(a.status="failed",a.validateMessage=b(e,t))})}}),Promise.resolve()),_=()=>{a.status="unvalidated",a.validateMessage=""},L=()=>t("end-validate",{status:a.status}),D=(o=e.rules)=>new Promise(n=>{_(),o?(t("start-validate"),R(o).then(()=>{"failed"===a.status?(n({name:e.name,message:a.validateMessage}),L()):(a.status="passed",n(),L())})):n()}),U=t=>{if(k&&e.rules){const{validateTrigger:o}=k.props,n=Object(i["f"])(o).includes(t),c=e.rules.filter(e=>e.trigger?Object(i["f"])(e.trigger).includes(t):n);c.length&&D(c)}},z=t=>{var o;const{maxlength:n}=e;if(Object(s["a"])(n)&&O(t)>n){const e=S();if(e&&O(e)===+n)return e;const c=null==(o=r.value)?void 0:o.selectionEnd;if(a.focused&&c){const e=[...t],o=e.length-+n;return e.splice(c-o,o),e.join("")}return y(t,+n)}return t},A=(o,n="onChange")=>{const c=o;o=z(o);const i=O(c)-O(o);if("number"===e.type||"digit"===e.type){const t="number"===e.type;o=Object(u["d"])(o,t,t)}let l=0;if(e.formatter&&n===e.formatTrigger){const{formatter:t,maxlength:n}=e;if(o=t(o),Object(s["a"])(n)&&O(o)>n&&(o=y(o,+n)),r.value&&a.focused){const{selectionEnd:e}=r.value,o=y(c,e);l=O(t(o))-O(o)}}if(r.value&&r.value.value!==o)if(a.focused){let{selectionStart:e,selectionEnd:t}=r.value;if(r.value.value=o,Object(s["a"])(e)&&Object(s["a"])(t)){const n=O(o);i?(e-=i,t-=i):l&&(e+=l,t+=l),r.value.setSelectionRange(Math.min(e,n),Math.min(t,n))}}else r.value.value=o;o!==e.modelValue&&t("update:modelValue",o)},$=e=>{e.target.composing||A(e.target.value)},F=()=>{var e;return null==(e=r.value)?void 0:e.blur()},W=()=>{var e;return null==(e=r.value)?void 0:e.focus()},H=()=>{const t=r.value;"textarea"===e.type&&e.autosize&&t&&h(t,e.autosize)},Y=e=>{a.focused=!0,t("focus",e),Object(c["nextTick"])(H),V("readonly")&&F()},X=e=>{V("readonly")||(a.focused=!1,A(S(),"onBlur"),t("blur",e),U("onBlur"),Object(c["nextTick"])(H),Object(d["d"])())},q=e=>t("click-input",e),J=e=>t("click-left-icon",e),Z=e=>t("click-right-icon",e),G=e=>{Object(d["c"])(e),t("update:modelValue",""),t("clear",e)},K=Object(c["computed"])(()=>"boolean"===typeof e.error?e.error:!(!k||!k.props.showError||"failed"!==a.status)||void 0),Q=Object(c["computed"])(()=>{const e=V("labelWidth");if(e)return{width:Object(u["a"])(e)}}),ee=o=>{const n=13;if(o.keyCode===n){const t=k&&k.props.submitOnEnter;t||"textarea"===e.type||Object(d["c"])(o),"search"===e.type&&F()}t("keypress",o)},te=()=>e.id||n+"-input",oe=()=>a.status,ne=()=>{const t=B("control",[V("inputAlign"),{error:K.value,custom:!!o.input,"min-height":"textarea"===e.type&&!e.autosize}]);if(o.input)return Object(c["createVNode"])("div",{class:t,onClick:q},[o.input()]);const a={id:te(),ref:r,name:e.name,rows:void 0!==e.rows?+e.rows:void 0,class:t,disabled:V("disabled"),readonly:V("readonly"),autofocus:e.autofocus,placeholder:e.placeholder,autocomplete:e.autocomplete,enterkeyhint:e.enterkeyhint,"aria-labelledby":e.label?n+"-label":void 0,onBlur:X,onFocus:Y,onInput:$,onClick:q,onChange:v,onKeypress:ee,onCompositionend:v,onCompositionstart:f};return"textarea"===e.type?Object(c["createVNode"])("textarea",a,null):Object(c["createVNode"])("input",Object(c["mergeProps"])(j(e.type),a),null)},ce=()=>{const t=o["left-icon"];if(e.leftIcon||t)return Object(c["createVNode"])("div",{class:B("left-icon"),onClick:J},[t?t():Object(c["createVNode"])(x["a"],{name:e.leftIcon,classPrefix:e.iconPrefix},null)])},ae=()=>{const t=o["right-icon"];if(e.rightIcon||t)return Object(c["createVNode"])("div",{class:B("right-icon"),onClick:Z},[t?t():Object(c["createVNode"])(x["a"],{name:e.rightIcon,classPrefix:e.iconPrefix},null)])},re=()=>{if(e.showWordLimit&&e.maxlength){const t=O(S());return Object(c["createVNode"])("div",{class:B("word-limit")},[Object(c["createVNode"])("span",{class:B("word-num")},[t]),Object(c["createTextVNode"])("/"),e.maxlength])}},ie=()=>{if(k&&!1===k.props.showErrorMessage)return;const t=e.errorMessage||a.validateMessage;if(t){const e=o["error-message"],n=V("errorMessageAlign");return Object(c["createVNode"])("div",{class:B("error-message",n)},[e?e({message:t}):t])}},le=()=>{const t=V("colon")?":":"";return o.label?[o.label(),t]:e.label?Object(c["createVNode"])("label",{id:n+"-label",for:te()},[e.label+t]):void 0},se=()=>[Object(c["createVNode"])("div",{class:B("body")},[ne(),E.value&&Object(c["createVNode"])(x["a"],{ref:w,name:e.clearIcon,class:B("clear")},null),ae(),o.button&&Object(c["createVNode"])("div",{class:B("button")},[o.button()])]),re(),ie()];return Object(I["a"])({blur:F,focus:W,validate:D,formValue:P,resetValidation:_,getValidationStatus:oe}),Object(c["provide"])(C["CUSTOM_FIELD_INJECTION_KEY"],{customValue:M,resetValidation:_,validateWithTrigger:U}),Object(c["watch"])(()=>e.modelValue,()=>{A(S()),_(),U("onChange"),Object(c["nextTick"])(H)}),Object(c["onMounted"])(()=>{A(S(),e.formatTrigger),Object(c["nextTick"])(H)}),Object(C["useEventListener"])("touchstart",G,{target:Object(c["computed"])(()=>{var e;return null==(e=w.value)?void 0:e.$el})}),()=>{const t=V("disabled"),n=V("labelAlign"),a=le(),r=ce();return Object(c["createVNode"])(T,{size:e.size,icon:e.leftIcon,class:B({error:K.value,disabled:t,["label-"+n]:n}),center:e.center,border:e.border,isLink:e.isLink,clickable:e.clickable,titleStyle:Q.value,valueClass:B("value"),titleClass:[B("label",[n,{required:e.required}]),e.labelClass],arrowDirection:e.arrowDirection},{icon:r?()=>r:null,title:a?()=>a:null,value:se,extra:o.extra})}}});const D=Object(n["a"])(L);var U=D},f8c9:function(e,t,o){var n=o("23e7"),c=o("da84"),a=o("d44e");n({global:!0},{Reflect:{}}),a(c.Reflect,"Reflect",!0)}}]);
//# sourceMappingURL=chunk-1fd9376f.3ad0da19.js.map