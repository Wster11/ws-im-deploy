{"version":3,"sources":["webpack:///./src/pages/Register/index.vue?31c7","webpack:///./src/pages/Register/index.vue","webpack:///./src/pages/Register/index.vue?0aa9","webpack:///./node_modules/vant/es/form/style/index.mjs","webpack:///./node_modules/vant/es/form/Form.mjs","webpack:///./node_modules/vant/es/form/index.mjs","webpack:///./src/pages/Register/index.vue?a646"],"names":["_withScopeId","n","_pushScopeId","_popScopeId","_hoisted_1","class","_hoisted_2","_createElementVNode","_hoisted_3","style","render","_ctx","_cache","$props","$setup","$data","$options","_component_Field","_resolveComponent","_component_CellGroup","_component_Button","_component_Form","_openBlock","_createElementBlock","_createVNode","onSubmit","register","default","_withCtx","inset","modelValue","username","$event","name","label","placeholder","rules","required","message","password","type","_","loading","round","block","_createTextVNode","onClick","args","toLogin","Register","Vue","constructor","setup","store","useStore","ref","router","useRouter","opt","value","state","IM","connect","registerUser","nickname","then","_Toast","push","catch","e","console","log","errInfo","data","JSON","parse","error","ERROR_CODE","registerUnique","finally","params","__decorate","Options","components","Form","_Form","Field","_Field","CellGroup","_CellGroup","Button","_Button","__exports__","bem","create","formProps","colon","Boolean","disabled","readonly","showError","labelWidth","labelAlign","String","inputAlign","scrollToError","validateFirst","submitOnEnter","showErrorMessage","errorMessageAlign","validateTrigger","Array","stdin_default","props","emits","emit","slots","children","linkChildren","getFieldsByNames","names","filter","field","includes","validateSeq","Promise","resolve","reject","errors","fields","reduce","promise","length","validate","validateAll","all","map","item","validateField","name2","matched","find","resetValidation","forEach","getValidationStatus","form","scrollToField","options","some","$el","scrollIntoView","getValues","formValue","submit","values","event","_a","call"],"mappings":"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","file":"js/chunk-18e92e9f.a4457c2f.js","sourcesContent":["import { createElementVNode as _createElementVNode, resolveComponent as _resolveComponent, createVNode as _createVNode, withCtx as _withCtx, createTextVNode as _createTextVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-159a62d9\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = { class: \"registerWrap\" }\nconst _hoisted_2 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"wel\" }, \"VolcanO\", -1))\nconst _hoisted_3 = { style: {\"margin\":\"16px\"} }\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  const _component_Field = _resolveComponent(\"Field\")!\n  const _component_CellGroup = _resolveComponent(\"CellGroup\")!\n  const _component_Button = _resolveComponent(\"Button\")!\n  const _component_Form = _resolveComponent(\"Form\")!\n\n  return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n    _hoisted_2,\n    _createVNode(_component_Form, {\n      onSubmit: _ctx.register.onSubmit\n    }, {\n      default: _withCtx(() => [\n        _createVNode(_component_CellGroup, { inset: \"\" }, {\n          default: _withCtx(() => [\n            _createVNode(_component_Field, {\n              modelValue: _ctx.register.username,\n              \"onUpdate:modelValue\": _cache[0] || (_cache[0] = ($event: any) => ((_ctx.register.username) = $event)),\n              name: \"username\",\n              label: \"用户名\",\n              placeholder: \"用户名\",\n              rules: [{ required: true, message: '请填写用户名' }]\n            }, null, 8, [\"modelValue\"]),\n            _createVNode(_component_Field, {\n              modelValue: _ctx.register.password,\n              \"onUpdate:modelValue\": _cache[1] || (_cache[1] = ($event: any) => ((_ctx.register.password) = $event)),\n              type: \"password\",\n              name: \"password\",\n              label: \"密码\",\n              placeholder: \"密码\",\n              rules: [{ required: true, message: '请填写密码' }]\n            }, null, 8, [\"modelValue\"])\n          ]),\n          _: 1\n        }),\n        _createElementVNode(\"div\", _hoisted_3, [\n          _createVNode(_component_Button, {\n            loading: _ctx.register.loading,\n            round: \"\",\n            block: \"\",\n            type: \"primary\",\n            \"native-type\": \"submit\"\n          }, {\n            default: _withCtx(() => [\n              _createTextVNode(\" 立即注册 \")\n            ]),\n            _: 1\n          }, 8, [\"loading\"])\n        ])\n      ]),\n      _: 1\n    }, 8, [\"onSubmit\"]),\n    _createElementVNode(\"div\", {\n      class: \"toLogin\",\n      onClick: _cache[2] || (_cache[2] = \n//@ts-ignore\n(...args) => (_ctx.register.toLogin && _ctx.register.toLogin(...args)))\n    }, \"已有账号？去登录\")\n  ]))\n}","\nimport { Options, Vue, setup } from \"vue-class-component\";\nimport { Form, Field, CellGroup, Button, Toast } from \"vant\";\nimport { ref } from \"vue\";\nimport { useStore } from \"vuex\";\nimport { useRouter } from \"vue-router\";\nimport { ERROR_CODE } from \"@/const/errorCode\";\nimport { AllState } from \"../../store\";\n\ninterface RegisterFormParams {\n  username: string;\n  password: string;\n}\n\n@Options({\n  components: {\n    Form,\n    Field,\n    CellGroup,\n    Button\n  }\n})\nexport default class Register extends Vue {\n  register = setup(() => {\n    const store = useStore<AllState>();\n    const username = ref<string>(\"\");\n    const password = ref<string>(\"\");\n    const router = useRouter();\n\n    let loading = ref<boolean>(false);\n\n    const register = (opt: RegisterFormParams) => {\n      // 注册新用户\n      loading.value = true;\n      store.state.IM.connect\n        .registerUser({\n          username: opt.username,\n          password: opt.password,\n          nickname: opt.username\n        })\n        .then(() => {\n          Toast(\"注册成功\");\n          router.push(\"/login\");\n        })\n        .catch((e) => {\n          console.log(e, \"eeee\");\n          let errInfo: any = {};\n          if (e.data) {\n            errInfo = JSON.parse(e.data);\n          }\n          if (errInfo.error === ERROR_CODE.registerUnique) {\n            Toast(\"用户已存在\");\n          } else {\n            Toast(\"注册失败\");\n          }\n        })\n        .finally(() => {\n          loading.value = false;\n        });\n    };\n\n    const onSubmit = (params: RegisterFormParams): void => {\n      register(params);\n    };\n\n    const toLogin = (): void => {\n      router.push(\"/login\");\n    };\n\n    return {\n      username,\n      password,\n      loading,\n      toLogin,\n      onSubmit\n    };\n  });\n}\n","import { render } from \"./index.vue?vue&type=template&id=159a62d9&scoped=true&ts=true\"\nimport script from \"./index.vue?vue&type=script&lang=ts\"\nexport * from \"./index.vue?vue&type=script&lang=ts\"\n\nimport \"./index.vue?vue&type=style&index=0&id=159a62d9&scoped=true&lang=less\"\n\nimport exportComponent from \"/Users/zhaoliang/Desktop/vue3-webim/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-159a62d9\"]])\n\nexport default __exports__","import \"../../style/base.css\";\n","import { createVNode as _createVNode } from \"vue\";\nimport { defineComponent } from \"vue\";\nimport { FORM_KEY, truthProp, numericProp, preventDefault, createNamespace } from \"../utils/index.mjs\";\nimport { useChildren } from \"@vant/use\";\nimport { useExpose } from \"../composables/use-expose.mjs\";\nconst [name, bem] = createNamespace(\"form\");\nconst formProps = {\n  colon: Boolean,\n  disabled: Boolean,\n  readonly: Boolean,\n  showError: Boolean,\n  labelWidth: numericProp,\n  labelAlign: String,\n  inputAlign: String,\n  scrollToError: Boolean,\n  validateFirst: Boolean,\n  submitOnEnter: truthProp,\n  showErrorMessage: truthProp,\n  errorMessageAlign: String,\n  validateTrigger: {\n    type: [String, Array],\n    default: \"onBlur\"\n  }\n};\nvar stdin_default = defineComponent({\n  name,\n  props: formProps,\n  emits: [\"submit\", \"failed\"],\n  setup(props, {\n    emit,\n    slots\n  }) {\n    const {\n      children,\n      linkChildren\n    } = useChildren(FORM_KEY);\n    const getFieldsByNames = (names) => {\n      if (names) {\n        return children.filter((field) => names.includes(field.name));\n      }\n      return children;\n    };\n    const validateSeq = (names) => new Promise((resolve, reject) => {\n      const errors = [];\n      const fields = getFieldsByNames(names);\n      fields.reduce((promise, field) => promise.then(() => {\n        if (!errors.length) {\n          return field.validate().then((error) => {\n            if (error) {\n              errors.push(error);\n            }\n          });\n        }\n      }), Promise.resolve()).then(() => {\n        if (errors.length) {\n          reject(errors);\n        } else {\n          resolve();\n        }\n      });\n    });\n    const validateAll = (names) => new Promise((resolve, reject) => {\n      const fields = getFieldsByNames(names);\n      Promise.all(fields.map((item) => item.validate())).then((errors) => {\n        errors = errors.filter(Boolean);\n        if (errors.length) {\n          reject(errors);\n        } else {\n          resolve();\n        }\n      });\n    });\n    const validateField = (name2) => {\n      const matched = children.find((item) => item.name === name2);\n      if (matched) {\n        return new Promise((resolve, reject) => {\n          matched.validate().then((error) => {\n            if (error) {\n              reject(error);\n            } else {\n              resolve();\n            }\n          });\n        });\n      }\n      return Promise.reject();\n    };\n    const validate = (name2) => {\n      if (typeof name2 === \"string\") {\n        return validateField(name2);\n      }\n      return props.validateFirst ? validateSeq(name2) : validateAll(name2);\n    };\n    const resetValidation = (name2) => {\n      if (typeof name2 === \"string\") {\n        name2 = [name2];\n      }\n      const fields = getFieldsByNames(name2);\n      fields.forEach((item) => {\n        item.resetValidation();\n      });\n    };\n    const getValidationStatus = () => children.reduce((form, field) => {\n      form[field.name] = field.getValidationStatus();\n      return form;\n    }, {});\n    const scrollToField = (name2, options) => {\n      children.some((item) => {\n        if (item.name === name2) {\n          item.$el.scrollIntoView(options);\n          return true;\n        }\n        return false;\n      });\n    };\n    const getValues = () => children.reduce((form, field) => {\n      form[field.name] = field.formValue.value;\n      return form;\n    }, {});\n    const submit = () => {\n      const values = getValues();\n      validate().then(() => emit(\"submit\", values)).catch((errors) => {\n        emit(\"failed\", {\n          values,\n          errors\n        });\n        if (props.scrollToError && errors[0].name) {\n          scrollToField(errors[0].name);\n        }\n      });\n    };\n    const onSubmit = (event) => {\n      preventDefault(event);\n      submit();\n    };\n    linkChildren({\n      props\n    });\n    useExpose({\n      submit,\n      validate,\n      getValues,\n      scrollToField,\n      resetValidation,\n      getValidationStatus\n    });\n    return () => {\n      var _a;\n      return _createVNode(\"form\", {\n        \"class\": bem(),\n        \"onSubmit\": onSubmit\n      }, [(_a = slots.default) == null ? void 0 : _a.call(slots)]);\n    };\n  }\n});\nexport {\n  stdin_default as default\n};\n","import { withInstall } from \"../utils/index.mjs\";\nimport _Form from \"./Form.mjs\";\nconst Form = withInstall(_Form);\nvar stdin_default = Form;\nexport {\n  Form,\n  stdin_default as default\n};\n","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--11-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./index.vue?vue&type=style&index=0&id=159a62d9&scoped=true&lang=less\""],"sourceRoot":""}