import{d as e,a,K as l,E as s,F as u,r as t,o as r,c,w as o,b as d,e as n,t as p,M as i,N as v,J as m,O as f,s as _,af as h,k as g,l as b,U as w,v as $,m as I,p as V,q as k}from"./index-570604c4.js";import{A as x,d as j}from"./defaultAvatar.b2cfb2fc.js";import{_ as C}from"./_plugin-vue_export-helper.1b428a4d.js";const G=C(e({__name:"index",setup(e){const{t:C}=a(),G=l(),N=s(),{getUserInfoFromStore:U}=N,{createGroup:A}=u(),D=t([]),F=t(""),M=t(""),P=t(!0),S=e=>{D.value=e.detail.value},q=e=>{P.value=e.detail.value},y=()=>{""===F.value&&(F.value=D.value.join(",")),""===M.value&&(M.value="group desc"),A({data:{groupname:F.value,members:D.value,desc:M.value,public:P.value,allowinvites:!0,inviteNeedConfirm:!1,approval:!1,maxusers:500}}).then((()=>{_({icon:"none",title:C("createGroupSuccess")}),h()})).catch((e=>{_({icon:"none",title:e.message})}))};return(e,a)=>{const l=g,s=b,u=w,t=V,_=k,h=$,C=I;return r(),c(l,{class:"create-group-wrap"},{default:o((()=>[d(l,{class:"content"},{default:o((()=>[d(l,{class:"input-wrap"},{default:o((()=>[d(l,{class:"label"},{default:o((()=>[n(p(e.$t("groupName")),1)])),_:1}),d(s,{modelValue:F.value,"onUpdate:modelValue":a[0]||(a[0]=e=>F.value=e),placeholder:e.$t("groupNamePlaceholder")},null,8,["modelValue","placeholder"])])),_:1}),d(l,{class:"input-wrap"},{default:o((()=>[d(l,{class:"label"},{default:o((()=>[n(p(e.$t("groupDesc")),1)])),_:1}),d(s,{modelValue:M.value,"onUpdate:modelValue":a[1]||(a[1]=e=>M.value=e),placeholder:e.$t("groupDescPlaceholder")},null,8,["modelValue","placeholder"])])),_:1}),d(l,{class:"label"},{default:o((()=>[n(p(e.$t("publicGroup")),1)])),_:1}),d(u,{class:"switch",checked:P.value,onChange:q},null,8,["checked"]),d(l,{class:"label"},{default:o((()=>[n(p(e.$t("groupMember")),1)])),_:1}),d(h,{class:"uni-list",onChange:S},{default:o((()=>[(r(!0),i(f,null,v(m(G).contacts,(e=>(r(),c(_,{class:"uni-list-cell uni-list-cell-pd",key:e.userId},{default:o((()=>[d(l,null,{default:o((()=>[d(t,{value:e.userId},null,8,["value"])])),_:2},1024),d(l,{class:"user-item-wrap"},{default:o((()=>[d(x,{src:m(U)(e.userId).avatar,placeholder:m(j)},null,8,["src","placeholder"]),d(l,{class:"user-name ellipsis"},{default:o((()=>[n(p(m(U)(e.userId).name),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)))),128))])),_:1}),d(C,{class:"create-btn",onClick:y,disabled:0===D.value.length},{default:o((()=>[n(p(e.$t("createGroup")),1)])),_:1},8,["disabled"])])),_:1})])),_:1})}}}),[["__scopeId","data-v-788264f7"]]);export{G as default};
