import{d as a,F as e,u as t,B as s,N as n,A as o,D as u,o as l,c as i,w as c,b as r,g as d,e as f,t as m,R as p,S as g,C as _,k as v}from"./index-0e812019.js";import{A as C,d as h}from"./defaultAvatar.5704f27d.js";import{_ as N}from"./_plugin-vue_export-helper.1b428a4d.js";const I=N(a({__name:"index",setup(a){const N=e(),{close:I}=t(),k=s(),{getChatConn:x}=n(),$=o(),{getUserInfoFromStore:S,updateUserInfo:U}=$,R=x().user,b=u((()=>S(R))),w=()=>{uni.chooseImage({count:1,success:a=>{const e=$.appUserInfo.get(R);$.appUserInfo.set(R,{...e,avatarurl:a.tempFilePaths[0]}),uni.uploadFile({url:p(R),filePath:a.tempFilePaths[0],fileType:"image",name:"file",header:{Authorization:"Bearer "+g.token},success:a=>{const e=JSON.parse(a.data);U({avatarurl:e.avatarUrl})}})}})},A=()=>{uni.setClipboardData({data:R})},F=()=>{N.clearContactNoticeUnReadCount(),uni.navigateTo({url:"../../pages/ContactNotices/index"})},T=()=>{k.clearGroupNoticeUnReadCount(),uni.navigateTo({url:"../../pages/GroupNotices/index"})},j=()=>{uni.navigateTo({url:"../../pages/Setting/index"})},y=()=>{I(),uni.removeStorageSync(_),uni.reLaunch({url:"/pages/Login/index"})};return(a,e)=>{const t=v;return l(),i(t,{class:"user-wrap"},{default:c((()=>[r(t,{class:"user-info-wrap"},{default:c((()=>[r(t,{class:"avatar-wrap"},{default:c((()=>[r(C,{class:"user-avatar",src:b.value.avatar,placeholder:d(h)},null,8,["src","placeholder"]),r(t,{onClick:w,class:"change-avatar"},{default:c((()=>[f(m(a.$t("edit")),1)])),_:1})])),_:1}),r(t,{class:"info-wrap"},{default:c((()=>[r(t,{class:"name",onClick:A},{default:c((()=>[f(m(b.value.name)+"（"+m(d(R))+"）",1)])),_:1}),r(t,{class:"sign"},{default:c((()=>[f(m(b.value.sign),1)])),_:1})])),_:1})])),_:1}),r(t,{class:"divider"}),r(t,{class:"menu-wrap"},{default:c((()=>[r(t,{class:"menu-item",onClick:F},{default:c((()=>[f(m(a.$t("contactNotice"))+" "+m(d(N).contactsNoticeInfo.unReadCount?`(${d(N).contactsNoticeInfo.unReadCount})`:"")+" ",1),r(t,{class:"item-info"},{default:c((()=>[f(">")])),_:1})])),_:1}),r(t,{class:"menu-item",onClick:T},{default:c((()=>[f(m(a.$t("groupNotice"))+" "+m(d(k).groupNoticeInfo.unReadCount?`(${d(k).groupNoticeInfo.unReadCount})`:"")+" ",1),r(t,{class:"item-info"},{default:c((()=>[f(">")])),_:1})])),_:1}),r(t,{class:"menu-item",onClick:j},{default:c((()=>[f(m(a.$t("personalSetting"))+" ",1),r(t,{class:"item-info"},{default:c((()=>[f(">")])),_:1})])),_:1}),r(t,{class:"menu-item"},{default:c((()=>[f(m(a.$t("feedback"))+" ",1),r(t,{class:"item-info"},{default:c((()=>[f("yunxing@easemob.com")])),_:1})])),_:1}),r(t,{class:"menu-item"},{default:c((()=>[r(t,null,{default:c((()=>[f(m(a.$t("about")),1)])),_:1}),r(t,{class:"item-info"},{default:c((()=>[f("Easemob UniApp SDK v4.7.0")])),_:1})])),_:1}),r(t,{class:"menu-item menu-item-logout",onClick:y},{default:c((()=>[f(m(a.$t("logout")),1)])),_:1})])),_:1})])),_:1})}}}),[["__scopeId","data-v-08384cca"]]);export{I as default};
