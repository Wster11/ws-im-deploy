import{d as a,E as e,u as t,A as s,L as n,z as o,B as u,o as l,c as i,w as c,b as r,g as d,e as f,t as m,P as p,Q as g,C as _,k as v}from"./index-9aff2880.js";import{A as C,d as h}from"./defaultAvatar.4d3ce48c.js";import{_ as N}from"./_plugin-vue_export-helper.1b428a4d.js";const I=N(a({__name:"index",setup(a){const N=e(),{close:I}=t(),k=s(),{getChatConn:x}=n(),$=o(),{getUserInfoFromStore:U,updateUserInfo:S}=$,b=x().user,w=u((()=>U(b))),R=()=>{uni.chooseImage({count:1,success:a=>{const e=$.appUserInfo.get(b);$.appUserInfo.set(b,{...e,avatarurl:a.tempFilePaths[0]}),uni.uploadFile({url:p(b),filePath:a.tempFilePaths[0],fileType:"image",name:"file",header:{Authorization:"Bearer "+g.token},success:a=>{const e=JSON.parse(a.data);S({avatarurl:e.avatarUrl})}})}})},A=()=>{uni.setClipboardData({data:b})},F=()=>{N.clearContactNoticeUnReadCount(),uni.navigateTo({url:"../../pages/ContactNotices/index"})},P=()=>{k.clearGroupNoticeUnReadCount(),uni.navigateTo({url:"../../pages/GroupNotices/index"})},T=()=>{uni.navigateTo({url:"../../pages/Setting/index"})},j=()=>{I(),uni.removeStorageSync(_),uni.reLaunch({url:"/pages/Login/index"})};return(a,e)=>{const t=v;return l(),i(t,{class:"user-wrap"},{default:c((()=>[r(t,{class:"user-info-wrap"},{default:c((()=>[r(t,{class:"avatar-wrap"},{default:c((()=>[r(C,{class:"user-avatar",src:w.value.avatar,placeholder:d(h)},null,8,["src","placeholder"]),r(t,{onClick:R,class:"change-avatar"},{default:c((()=>[f(m(a.$t("edit")),1)])),_:1})])),_:1}),r(t,{class:"info-wrap"},{default:c((()=>[r(t,{class:"name",onClick:A},{default:c((()=>[f(m(w.value.name)+"（"+m(d(b))+"）",1)])),_:1}),r(t,{class:"sign"},{default:c((()=>[f(m(w.value.sign),1)])),_:1})])),_:1})])),_:1}),r(t,{class:"divider"}),r(t,{class:"menu-wrap"},{default:c((()=>[r(t,{class:"menu-item",onClick:F},{default:c((()=>[f(m(a.$t("contactNotice"))+" "+m(d(N).contactsNoticeInfo.unReadCount?`(${d(N).contactsNoticeInfo.unReadCount})`:"")+" ",1),r(t,{class:"item-info"},{default:c((()=>[f(">")])),_:1})])),_:1}),r(t,{class:"menu-item",onClick:P},{default:c((()=>[f(m(a.$t("groupNotice"))+" "+m(d(k).groupNoticeInfo.unReadCount?`(${d(k).groupNoticeInfo.unReadCount})`:"")+" ",1),r(t,{class:"item-info"},{default:c((()=>[f(">")])),_:1})])),_:1}),r(t,{class:"menu-item",onClick:T},{default:c((()=>[f(m(a.$t("personalSetting"))+" ",1),r(t,{class:"item-info"},{default:c((()=>[f(">")])),_:1})])),_:1}),r(t,{class:"menu-item"},{default:c((()=>[f(m(a.$t("feedback"))+" ",1),r(t,{class:"item-info"},{default:c((()=>[f("yunxing@easemob.com")])),_:1})])),_:1}),r(t,{class:"menu-item"},{default:c((()=>[r(t,null,{default:c((()=>[f(m(a.$t("about")),1)])),_:1}),r(t,{class:"item-info"},{default:c((()=>[f("Easemob UniApp SDK v4.7.0")])),_:1})])),_:1}),r(t,{class:"menu-item menu-item-logout",onClick:j},{default:c((()=>[f(m(a.$t("logout")),1)])),_:1})])),_:1})])),_:1})}}}),[["__scopeId","data-v-08384cca"]]);export{I as default};
