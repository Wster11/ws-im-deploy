import{d as e,K as a,F as l,a as s,r,E as t,G as u,B as n,o as d,c as i,w as o,b as v,M as c,N as p,O as m,e as f,t as _,g,af as y,s as h,k as I,v as b,m as k,J as w,p as x,q as U}from"./index-570604c4.js";import{A as j,d as q}from"./defaultAvatar.b2cfb2fc.js";import{_ as C}from"./_plugin-vue_export-helper.1b428a4d.js";const F=C(e({__name:"index",setup(e){const C=a(),F=l(),{t:G}=s(),{inviteJoinGroup:M,removeUserFromGroup:S}=F,A=r(""),D=r("invite"),J=r([]),$=t(),{getUserInfoFromStore:B}=$,E=u((()=>{var e;return null==(e=F.groupDetailMap.get(A.value))?void 0:e.affiliations.map((e=>({userId:(null==e?void 0:e.owner)||(null==e?void 0:e.member)})))})),K=e=>{J.value=e.detail.value},N=u((()=>{var e;return"remove"===D.value?null==(e=E.value)?void 0:e.filter((e=>{var a;return e.userId!==(null==(a=F.groupDetailMap.get(A.value))?void 0:a.owner)})):C.contacts})),O=e=>{var a;return"remove"!==D.value&&!!(null==(a=E.value)?void 0:a.find((a=>a.userId===e)))},z=async()=>{try{await M(A.value,J.value),y(),h({title:G("requestSended"),icon:"success"})}catch(e){console.error(e)}},H=async()=>{try{await S(A.value,J.value),y(),h({title:G("requestSended"),icon:"success"})}catch(e){console.error(e)}};return n((async e=>{A.value=null==e?void 0:e.id,D.value=null==e?void 0:e.type})),(e,a)=>{const l=x,s=I,r=U,t=b,u=k;return d(),i(s,{class:"invite-group-wrap"},{default:o((()=>[v(s,{class:"content"},{default:o((()=>[v(t,{class:"uni-list",onChange:K},{default:o((()=>[(d(!0),c(m,null,p(N.value,(e=>(d(),i(r,{class:"uni-list-cell uni-list-cell-pd",key:e.userId},{default:o((()=>[v(s,null,{default:o((()=>[v(l,{checked:O(e.userId),value:e.userId,disabled:O(e.userId)},null,8,["checked","value","disabled"])])),_:2},1024),v(s,{class:"user-item-wrap"},{default:o((()=>[v(j,{src:w(B)(e.userId).avatar,placeholder:w(q)},null,8,["src","placeholder"]),v(s,{class:"user-name"},{default:o((()=>[f(_(w(B)(e.userId).name),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)))),128))])),_:1}),"invite"===D.value?(d(),i(u,{key:0,class:"opt-btn",onClick:z,type:"primary",disabled:0===J.value.length},{default:o((()=>[f(_(e.$t("inviteUser")),1)])),_:1},8,["disabled"])):g("",!0),"remove"===D.value?(d(),i(u,{key:1,class:"opt-btn",type:"warn",onClick:H,disabled:0===J.value.length},{default:o((()=>[f(_(e.$t("removeUser")),1)])),_:1},8,["disabled"])):g("",!0)])),_:1})])),_:1})}}}),[["__scopeId","data-v-34a1e5d5"]]);export{F as default};
