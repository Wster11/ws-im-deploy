import{d as a,B as e,u as t,x as s,K as n,v as o,y as u,o as l,c as i,w as c,b as r,A as d,e as f,t as m,N as p,O as g,C as _,j as v}from"./index-a5a208fc.js";import{A as C,d as h}from"./defaultAvatar.c6c7c8ae.js";import{_ as N}from"./_plugin-vue_export-helper.1b428a4d.js";const x=N(a({__name:"index",setup(a){const N=e(),{close:x}=t(),I=s(),{getChatConn:$}=n(),k=o(),{getUserInfoFromStore:U,updateUserInfo:S}=k,b=$().user,w=u((()=>U(b))),R=()=>{uni.chooseImage({count:1,success:a=>{const e=k.appUserInfo.get(b);k.appUserInfo.set(b,{...e,avatarurl:a.tempFilePaths[0]}),uni.uploadFile({url:p(b),filePath:a.tempFilePaths[0],fileType:"image",name:"file",header:{Authorization:"Bearer "+g.token},success:a=>{const e=JSON.parse(a.data);S({avatarurl:e.avatarUrl})}})}})},A=()=>{uni.setClipboardData({data:b})},j=()=>{N.clearContactNoticeUnReadCount(),uni.navigateTo({url:"../../pages/ContactNotices/index"})},y=()=>{I.clearGroupNoticeUnReadCount(),uni.navigateTo({url:"../../pages/GroupNotices/index"})},F=()=>{uni.navigateTo({url:"../../pages/Setting/index"})},T=()=>{x(),uni.removeStorageSync(_),uni.reLaunch({url:"/pages/Login/index"})};return(a,e)=>{const t=v;return l(),i(t,{class:"user-wrap"},{default:c((()=>[r(t,{class:"user-info-wrap"},{default:c((()=>[r(t,{class:"avatar-wrap"},{default:c((()=>[r(C,{class:"user-avatar",src:w.value.avatar,placeholder:d(h)},null,8,["src","placeholder"]),r(t,{onClick:R,class:"change-avatar"},{default:c((()=>[f(m(a.$t("edit")),1)])),_:1})])),_:1}),r(t,{class:"info-wrap"},{default:c((()=>[r(t,{class:"name",onClick:A},{default:c((()=>[f(m(w.value.name)+"（"+m(d(b))+"）",1)])),_:1}),r(t,{class:"sign"},{default:c((()=>[f(m(w.value.sign),1)])),_:1})])),_:1})])),_:1}),r(t,{class:"divider"}),r(t,{class:"menu-wrap"},{default:c((()=>[r(t,{class:"menu-item",onClick:j},{default:c((()=>[f(m(a.$t("contactNotice"))+" "+m(d(N).contactsNoticeInfo.unReadCount?`(${d(N).contactsNoticeInfo.unReadCount})`:"")+" ",1),r(t,{class:"item-info"},{default:c((()=>[f(">")])),_:1})])),_:1}),r(t,{class:"menu-item",onClick:y},{default:c((()=>[f(m(a.$t("groupNotice"))+" "+m(d(I).groupNoticeInfo.unReadCount?`(${d(I).groupNoticeInfo.unReadCount})`:"")+" ",1),r(t,{class:"item-info"},{default:c((()=>[f(">")])),_:1})])),_:1}),r(t,{class:"menu-item",onClick:F},{default:c((()=>[f(m(a.$t("personalSetting"))+" ",1),r(t,{class:"item-info"},{default:c((()=>[f(">")])),_:1})])),_:1}),r(t,{class:"menu-item"},{default:c((()=>[f(m(a.$t("feedback"))+" ",1),r(t,{class:"item-info"},{default:c((()=>[f("yunxing@easemob.com")])),_:1})])),_:1}),r(t,{class:"menu-item"},{default:c((()=>[r(t,null,{default:c((()=>[f(m(a.$t("about")),1)])),_:1}),r(t,{class:"item-info"},{default:c((()=>[f("Easemob UniApp SDK v4.7.0")])),_:1})])),_:1}),r(t,{class:"menu-item menu-item-logout",onClick:T},{default:c((()=>[f(m(a.$t("logout")),1)])),_:1})])),_:1})])),_:1})}}}),[["__scopeId","data-v-08384cca"]]);export{x as default};
