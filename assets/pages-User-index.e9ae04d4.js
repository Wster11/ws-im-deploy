import{d as a,K as e,u as t,F as s,S as n,E as o,G as l,o as u,c,w as i,b as r,J as d,e as f,t as m,V as p,W as _,X as g,Y as C,n as v,Z as h,C as N,_ as x,k as I}from"./index-570604c4.js";import{A as $,d as k}from"./defaultAvatar.b2cfb2fc.js";import{_ as U}from"./_plugin-vue_export-helper.1b428a4d.js";const b=U(a({__name:"index",setup(a){const U=e(),{close:b}=t(),w=s(),{getChatConn:R}=n(),S=o(),{getUserInfoFromStore:A,updateUserInfo:F}=S,j=R().user,G=l((()=>A(j))),P=()=>{p({count:1,success:a=>{const e=S.appUserInfo.get(j);S.appUserInfo.set(j,{...e,avatarurl:a.tempFilePaths[0]}),_({url:g(j),filePath:a.tempFilePaths[0],fileType:"image",name:"file",header:{Authorization:"Bearer "+C.token},success:a=>{const e=JSON.parse(a.data);F({avatarurl:e.avatarUrl})}})}})},y=()=>{U.clearContactNoticeUnReadCount(),v({url:"../../pages/ContactNotices/index"})},E=()=>{w.clearGroupNoticeUnReadCount(),v({url:"../../pages/GroupNotices/index"})},J=()=>{v({url:"../../pages/Setting/index"})},K=()=>{b(),h(N),x({url:"/pages/Login/index"})};return(a,e)=>{const t=I;return u(),c(t,{class:"user-wrap"},{default:i((()=>[r(t,{class:"user-info-wrap"},{default:i((()=>[r(t,{class:"avatar-wrap"},{default:i((()=>[r($,{class:"user-avatar",src:G.value.avatar,placeholder:d(k)},null,8,["src","placeholder"]),r(t,{onClick:P,class:"change-avatar"},{default:i((()=>[f(m(a.$t("edit")),1)])),_:1})])),_:1}),r(t,{class:"info-wrap"},{default:i((()=>[r(t,{class:"name"},{default:i((()=>[f(m(G.value.name),1)])),_:1}),r(t,{class:"sign"},{default:i((()=>[f(m(G.value.sign),1)])),_:1})])),_:1})])),_:1}),r(t,{class:"divider"}),r(t,{class:"menu-wrap"},{default:i((()=>[r(t,{class:"menu-item",onClick:y},{default:i((()=>[f(m(a.$t("contactNotice"))+" "+m(d(U).contactsNoticeInfo.unReadCount?`(${d(U).contactsNoticeInfo.unReadCount})`:"")+" ",1),r(t,{class:"item-info"},{default:i((()=>[f(">")])),_:1})])),_:1}),r(t,{class:"menu-item",onClick:E},{default:i((()=>[f(m(a.$t("groupNotice"))+" "+m(d(w).groupNoticeInfo.unReadCount?`(${d(w).groupNoticeInfo.unReadCount})`:"")+" ",1),r(t,{class:"item-info"},{default:i((()=>[f(">")])),_:1})])),_:1}),r(t,{class:"menu-item",onClick:J},{default:i((()=>[f(m(a.$t("personalSetting"))+" ",1),r(t,{class:"item-info"},{default:i((()=>[f(">")])),_:1})])),_:1}),r(t,{class:"menu-item"},{default:i((()=>[f(m(a.$t("feedback"))+" ",1),r(t,{class:"item-info"},{default:i((()=>[f("yunxing@easemob.com")])),_:1})])),_:1}),r(t,{class:"menu-item"},{default:i((()=>[r(t,null,{default:i((()=>[f(m(a.$t("about")),1)])),_:1}),r(t,{class:"item-info"},{default:i((()=>[f("Easemob UniApp SDK v4.7.0")])),_:1})])),_:1}),r(t,{class:"menu-item menu-item-logout",onClick:K},{default:i((()=>[f(m(a.$t("logout")),1)])),_:1})])),_:1})])),_:1})}}}),[["__scopeId","data-v-712a5b51"]]);export{b as default};
