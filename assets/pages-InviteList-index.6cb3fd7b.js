import{d as e,B as a,x as l,a as s,r as t,v as u,y as r,q as n,o as i,c as o,w as d,b as v,E as c,F as p,G as m,e as f,t as _,g,j as h,p as y,l as I,A as b,m as w,n as k}from"./index-a5a208fc.js";import{A as x,d as j}from"./defaultAvatar.c6c7c8ae.js";import{_ as U}from"./_plugin-vue_export-helper.1b428a4d.js";const q=U(e({__name:"index",setup(e){const U=a(),q=l(),{t:A}=s(),{inviteJoinGroup:B,removeUserFromGroup:C}=q,F=t(""),G=t("invite"),S=t([]),D=u(),{getUserInfoFromStore:M}=D,T=r((()=>{var e;return null==(e=q.groupDetailMap.get(F.value))?void 0:e.affiliations.map((e=>({userId:(null==e?void 0:e.owner)||(null==e?void 0:e.member)})))})),$=e=>{S.value=e.detail.value},E=r((()=>{var e;return"remove"===G.value?null==(e=T.value)?void 0:e.filter((e=>{var a;return e.userId!==(null==(a=q.groupDetailMap.get(F.value))?void 0:a.owner)})):U.contacts})),J=e=>{var a;return"remove"!==G.value&&!!(null==(a=T.value)?void 0:a.find((a=>a.userId===e)))},z=async()=>{try{await B(F.value,S.value),uni.navigateBack(),uni.showToast({title:A("requestSended"),icon:"success"})}catch(e){console.error(e)}},H=async()=>{try{await C(F.value,S.value),uni.navigateBack(),uni.showToast({title:A("requestSended"),icon:"success"})}catch(e){console.error(e)}};return n((async e=>{F.value=null==e?void 0:e.id,G.value=null==e?void 0:e.type})),(e,a)=>{const l=w,s=h,t=k,u=y,r=I;return i(),o(s,{class:"invite-group-wrap"},{default:d((()=>[v(s,{class:"content"},{default:d((()=>[v(u,{class:"uni-list",onChange:$},{default:d((()=>[(i(!0),c(m,null,p(E.value,(e=>(i(),o(t,{class:"uni-list-cell uni-list-cell-pd",key:e.userId},{default:d((()=>[v(s,null,{default:d((()=>[v(l,{checked:J(e.userId),value:e.userId,disabled:J(e.userId)},null,8,["checked","value","disabled"])])),_:2},1024),v(s,{class:"user-item-wrap"},{default:d((()=>[v(x,{src:b(M)(e.userId).avatar,placeholder:b(j)},null,8,["src","placeholder"]),v(s,{class:"user-name"},{default:d((()=>[f(_(b(M)(e.userId).name),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)))),128))])),_:1}),"invite"===G.value?(i(),o(r,{key:0,class:"opt-btn",onClick:z,type:"primary",disabled:0===S.value.length},{default:d((()=>[f(_(e.$t("inviteUser")),1)])),_:1},8,["disabled"])):g("",!0),"remove"===G.value?(i(),o(r,{key:1,class:"opt-btn",type:"warn",onClick:H,disabled:0===S.value.length},{default:d((()=>[f(_(e.$t("removeUser")),1)])),_:1},8,["disabled"])):g("",!0)])),_:1})])),_:1})}}}),[["__scopeId","data-v-34a1e5d5"]]);export{q as default};
